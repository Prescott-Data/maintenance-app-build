"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[6630,1793,9416,6247,4454,8855,9435,4303],{76630:function(e,t,n){n.r(t),n.d(t,{Component:function(){return v}});var a=n(5292),r=n(28014),l=n(90591),i=n(6866),m=n(72176),o=n(50445),u=n(14571),c=n(87899),s=n(49394),d=n(16680),E=n(98855),f=n(1793);const p=`/${(0,d.HR)(d.Vr.dataElementGroup)}`;const h={resource:"dataElementGroups",type:"create",data:e=>e};function v(){const e=(0,a.ow)(),t=(0,u.Zp)(),n=(0,s.yZ)(),l=(f=n.data,{name:"",shortName:"",code:"",description:"",dataElements:[],attributeValues:(0,m.useMemo)((()=>f.map((e=>({attribute:e,value:""})))),[f])});var f;return m.createElement(c.aH,{queryResponse:n,label:r.A.t("Custom attributes")},m.createElement(o.lV,{validateOnBlur:!0,onSubmit:async function(n){try{await e.mutate(h,{variables:n})}catch(a){return{[i.Ym]:a.toString()}}t(p)},validate:e=>(0,d.tf)(E.dataElementGroupSchema,e),initialValues:l},(e=>{let{handleSubmit:n,submitting:a,submitError:r}=e;return m.createElement("form",{onSubmit:n},m.createElement(b,{submitError:r,submitting:a,onCancelClick:()=>t(p)}))})))}function b(e){let{submitError:t,onCancelClick:n,submitting:a}=e;const i=(0,m.useRef)(null);return(0,m.useEffect)((()=>{var e;t&&(null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[t]),m.createElement(m.Fragment,null,m.createElement("div",{className:f.default.form},m.createElement(E.DataElementGroupFormFields,null),t&&m.createElement(c.Hl,null,m.createElement("div",{ref:i},m.createElement(l.I,{error:!0,title:r.A.t("Something went wrong when submitting the form")},t))),m.createElement(c.Hl,null,m.createElement(c.Hn,{cancelLabel:r.A.t("Exit without saving"),submitLabel:r.A.t("Create data element group"),submitting:a,onCancelClick:n}))))}},26247:function(e,t,n){n.r(t),n.d(t,{DataElementsField:function(){return d}});var a=n(28014),r=n(73968),l=n(21039),i=n(24394),m=n(72176),o=n(50445),u=n(14571),c=n(87899),s=n(74454);function d(){var e;const t="dataElements",{input:n,meta:d}=(0,o.Mt)(t,{multiple:!0,format:e=>null===e||void 0===e?void 0:e.map((e=>e.id)),parse:e=>e.map((e=>({id:e}))),validateFields:[]}),E=(0,u.$P)("/dataElements/new"),f=(0,m.useRef)({refetch:()=>console.error("Not initialized")}),p=m.createElement("p",{className:s.default.dataElementsPickedHeader},a.A.t("Selected data elements")),h=m.createElement("div",{className:s.default.dataElementsOptionsFooter},m.createElement(r.v,null,m.createElement(l.$,{small:!0,onClick:f.current.refetch},a.A.t("Refresh list")),m.createElement(l.$,{small:!0,onClick:()=>window.open(E,"_blank")},a.A.t("Add new"))));return m.createElement(i.D,{dataTest:"formfields-dataElementsets",error:!!d.error,validationText:null===(e=d.error)||void 0===e?void 0:e.toString(),name:t},m.createElement(c.tx,{ref:f,selected:n.value,onChange:e=>{let{selected:t}=e;return n.onChange(t)},rightHeader:p,leftFooter:h}))}},29416:function(e,t,n){n.r(t),n.d(t,{DataElementsField:function(){return a.DataElementsField}});var a=n(26247)},29435:function(e,t,n){n.r(t),n.d(t,{DataElementGroupFormFields:function(){return c}});var a=n(28014),r=n(72176),l=n(87899),i=n(49394),m=n(16680),o=n(29416);const u=m.Vr.dataElementGroup;function c(){return r.createElement(r.Fragment,null,r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Basic information")),r.createElement(l.hK,null,a.A.t("Set up the information for this data element group")),r.createElement(i.Vd,null),r.createElement(l.Ys,null,r.createElement(i.zO,{schemaSection:u,helpText:a.A.t("Explain the purpose of this data element group.")}))),r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Data elements")),r.createElement(l.hK,null,""),r.createElement(l.Ys,null,r.createElement(o.DataElementsField,null))),r.createElement(l.Ot,{schemaSection:u}))}},44303:function(e,t,n){n.r(t),n.d(t,{dataElementGroupSchema:function(){return r}});var a=n(73044);const r=a.z.object({name:a.z.string().trim(),shortName:a.z.string().trim(),code:a.z.string().trim(),description:a.z.string().trim(),dataElements:a.z.array(a.z.object({id:a.z.string()}))}).partial()},98855:function(e,t,n){n.r(t),n.d(t,{DataElementGroupFormFields:function(){return a.DataElementGroupFormFields},dataElementGroupSchema:function(){return r.dataElementGroupSchema}});var a=n(29435),r=n(44303)},1793:function(e,t,n){n.r(t),t.default={form:"New_form__FZ0wM"}},74454:function(e,t,n){n.r(t),t.default={dataElementsOptionsFooter:"DataElementsField_dataElementsOptionsFooter__Fn5g8",dataElementsPickedHeader:"DataElementsField_dataElementsPickedHeader__bqjmJ"}}}]);
//# sourceMappingURL=6630.29c77685.chunk.js.map