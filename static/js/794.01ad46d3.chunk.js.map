{"version":3,"file":"static/js/794.01ad46d3.chunk.js","mappings":"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","sources":["../../../node_modules/@dhis2/ui-icons/build/es/react/Upload24.js","../../../node_modules/@dhis2-ui/file-input/build/es/file-input/file-input.js","../../../node_modules/@dhis2-ui/file-input/build/es/file-list/file-list.js","../../../node_modules/@dhis2/ui-icons/build/es/react/Attachment16.js","../../../node_modules/@dhis2-ui/file-input/build/es/file-list/file-list-item.js","D2App/pages/organisationUnits/form/ImageField.js","webpack://@dhis2/app-shell/./src/D2App/pages/organisationUnits/form/ImageField.module.css?4c9b"],"sourcesContent":["import PropTypes from 'prop-types';\nimport * as React from 'react';\nfunction SvgUpload24(_ref) {\n  let {\n    color,\n    dataTest,\n    ariaLabel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    color: color,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 4h.02c.023 0 .046.002.07.004L12 4a1.008 1.008 0 01.625.22l.082.073 4 4a1 1 0 01-1.32 1.497l-.094-.083L13 7.415V16a1 1 0 01-1.993.117L11 16V7.413L8.707 9.707a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094 4-4 .082-.073.008-.007-.09.08A1.008 1.008 0 0111.982 4H12z\",\n    fill: \"currentColor\"\n  }));\n}\nSvgUpload24.propTypes = {\n  color: PropTypes.string,\n  dataTest: PropTypes.string,\n  ariaLabel: PropTypes.string\n};\nexport default SvgUpload24;","import _JSXStyle from \"styled-jsx/style\";\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { colors, spacers, sharedPropTypes } from '@dhis2/ui-constants';\nimport { IconUpload24 } from '@dhis2/ui-icons';\nimport { Button } from '@dhis2-ui/button';\nimport { StatusIcon } from '@dhis2-ui/status-icon';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { createRef, Component } from 'react';\nclass FileInput extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ref\", /*#__PURE__*/createRef());\n    _defineProperty(this, \"handleClick\", () => {\n      this.ref.current.click();\n    });\n    _defineProperty(this, \"handleChange\", e => {\n      if (this.props.onChange) {\n        this.props.onChange(this.createHandlerPayload(), e);\n      }\n\n      // reset the file input so it won't prevent on-change\n      // if the same file was added in a second attempt\n      this.ref.current.value = '';\n    });\n    _defineProperty(this, \"handleBlur\", e => {\n      if (this.props.onBlur) {\n        this.props.onBlur(this.createHandlerPayload(), e);\n      }\n    });\n    _defineProperty(this, \"handleFocus\", e => {\n      if (this.props.onFocus) {\n        this.props.onFocus(this.createHandlerPayload(), e);\n      }\n    });\n    _defineProperty(this, \"handleKeyDown\", e => {\n      if (this.props.onKeyDown) {\n        this.props.onKeyDown(this.createHandlerPayload(), e);\n      }\n    });\n  }\n  createHandlerPayload() {\n    return {\n      files: this.ref.current.files,\n      name: this.props.name\n    };\n  }\n  render() {\n    const {\n      accept = '*',\n      buttonLabel,\n      className,\n      dataTest = 'dhis2-uicore-fileinput',\n      disabled,\n      error,\n      initialFocus,\n      large,\n      multiple,\n      name,\n      small,\n      tabIndex,\n      valid,\n      warning\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": dataTest,\n      className: _JSXStyle.dynamic([[\"1746996489\", [spacers.dp8, spacers.dp4]]]) + \" \" + (cx('file-input', className) || \"\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: _JSXStyle.dynamic([[\"1746996489\", [spacers.dp8, spacers.dp4]]])\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: name,\n      name: name,\n      type: \"file\",\n      ref: this.ref,\n      onChange: this.handleChange,\n      accept: accept,\n      multiple: multiple,\n      disabled: disabled,\n      \"data-test\": `${dataTest}-input`,\n      className: _JSXStyle.dynamic([[\"1746996489\", [spacers.dp8, spacers.dp4]]])\n    }), /*#__PURE__*/React.createElement(Button, {\n      disabled: disabled,\n      icon: /*#__PURE__*/React.createElement(IconUpload24, {\n        color: colors.grey700\n      }),\n      initialFocus: initialFocus,\n      large: large,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick,\n      onFocus: this.handleFocus,\n      onKeyDown: this.handleKeyDown,\n      small: small,\n      tabIndex: tabIndex,\n      type: \"button\"\n    }, buttonLabel)), /*#__PURE__*/React.createElement(StatusIcon, {\n      error: error,\n      valid: valid,\n      warning: warning\n    }), /*#__PURE__*/React.createElement(_JSXStyle, {\n      id: \"1746996489\",\n      dynamic: [spacers.dp8, spacers.dp4]\n    }, [\"input.__jsx-style-dynamic-selector{display:none;}\", `.file-input.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:${spacers.dp8};padding-bottom:${spacers.dp4};}`]));\n  }\n}\n_defineProperty(FileInput, \"defaultProps\", {\n  accept: '*',\n  dataTest: 'dhis2-uicore-fileinput'\n});\nFileInput.propTypes = {\n  /**\n   * The `accept` attribute of the [native file input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept)\n   */\n  accept: PropTypes.string,\n  buttonLabel: PropTypes.string,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  /** Input status. Mutually exclusive with `warning` and `valid` */\n  error: sharedPropTypes.statusPropType,\n  initialFocus: PropTypes.bool,\n  /** Button size. Mutually exclusive with `small` */\n  large: sharedPropTypes.sizePropType,\n  /**\n   * The `multiple` attribute of the [native file input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#multiple)\n   */\n  multiple: PropTypes.bool,\n  name: PropTypes.string,\n  /** Button size. Mutually exclusive with `large` */\n  small: sharedPropTypes.sizePropType,\n  tabIndex: PropTypes.string,\n  /** Input status. Mutually exclusive with `warning` and `error` */\n  valid: sharedPropTypes.statusPropType,\n  /** Input status. Mutually exclusive with `valid` and `error` */\n  warning: sharedPropTypes.statusPropType,\n  /** Called with signature `(object, event)` */\n  onBlur: PropTypes.func,\n  /** Called with signature `(object, event)` */\n  onChange: PropTypes.func,\n  /** Called with signature `(object, event)` */\n  onFocus: PropTypes.func,\n  /** Called with signature `(object, event)` */\n  onKeyDown: PropTypes.func\n};\nexport { FileInput };","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst FileList = _ref => {\n  let {\n    children,\n    className,\n    dataTest = 'dhis2-uicore-filelist'\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": dataTest,\n    className: \"jsx-2770071620\" + \" \" + (className || \"\")\n  }, children, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2770071620\"\n  }, [\"div.jsx-2770071620{padding-top:4px;}\", \".file-input+div.jsx-2770071620{padding-top:0;}\"]));\n};\nFileList.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string\n};\nexport { FileList };","import PropTypes from 'prop-types';\nimport * as React from 'react';\nfunction SvgAttachment16(_ref) {\n  let {\n    color,\n    dataTest,\n    ariaLabel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    width: 16,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    color: color,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 1a3 3 0 012.995 2.824L10 4v7a2 2 0 01-3.995.15L6 11V5a.5.5 0 01.992-.09L7 5v6a1 1 0 001.993.117L9 11V4a2 2 0 00-3.995-.15L5 4v7a3 3 0 005.995.176L11 11V5a.5.5 0 01.992-.09L12 5v6a4 4 0 01-7.995.2L4 11V4a3 3 0 013-3z\",\n    fill: \"currentColor\"\n  }));\n}\nSvgAttachment16.propTypes = {\n  color: PropTypes.string,\n  dataTest: PropTypes.string,\n  ariaLabel: PropTypes.string\n};\nexport default SvgAttachment16;","import _JSXStyle from \"styled-jsx/style\";\nimport { theme, colors, spacers } from '@dhis2/ui-constants';\nimport { IconAttachment16 } from '@dhis2/ui-icons';\nimport { CircularLoader } from '@dhis2-ui/loader';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst FileListItem = _ref => {\n  let {\n    className,\n    label,\n    onRemove,\n    removeText,\n    loading,\n    onCancel,\n    cancelText,\n    dataTest = 'dhis2-uicore-filelistitem'\n  } = _ref;\n  const handleKeyDown = event => {\n    if (!onRemove) {\n      return;\n    }\n    if (event.key === 'Enter' || event.key === 'Backspace' || event.key === 'Delete') {\n      onRemove({}, event);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"p\", {\n    \"data-test\": dataTest,\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + (cx('selected-file', className) || \"\")\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + \"icon\"\n  }, loading ? /*#__PURE__*/React.createElement(CircularLoader, {\n    extrasmall: true\n  }) : /*#__PURE__*/React.createElement(IconAttachment16, {\n    color: colors.grey700\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + \"text\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + \"label\"\n  }, label), loading && onCancel && cancelText && /*#__PURE__*/React.createElement(\"span\", {\n    onClick: event => onCancel({}, event),\n    \"data-test\": `${dataTest}-cancel`,\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + \"action\"\n  }, cancelText), !loading && /*#__PURE__*/React.createElement(\"span\", {\n    onClick: event => onRemove({}, event),\n    \"data-test\": `${dataTest}-remove`,\n    tabIndex: 0,\n    onKeyDown: handleKeyDown,\n    className: _JSXStyle.dynamic([[\"513536609\", [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]]]) + \" \" + \"action\"\n  }, removeText)), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"513536609\",\n    dynamic: [spacers.dp4, colors.grey900, colors.grey700, colors.red700, colors.red800, theme.focus]\n  }, [`p.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;padding-top:${spacers.dp4};}`, \"span.__jsx-style-dynamic-selector{display:inline-block;}\", \".icon.__jsx-style-dynamic-selector{margin-inline-end:4px;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:1px;}\", \".text.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}\", `.label.__jsx-style-dynamic-selector{font-size:14px;color:${colors.grey900};word-break:break-all;}`, \".label.__jsx-style-dynamic-selector::after{content:' ';display:inline-block;width:12px;}\", `.action.__jsx-style-dynamic-selector{font-size:12px;line-height:12px;margin-top:0;-webkit-text-decoration:underline;text-decoration:underline;cursor:pointer;color:${colors.grey700};}`, `.action.__jsx-style-dynamic-selector:hover{color:${colors.red700};}`, `.action.__jsx-style-dynamic-selector:active{color:${colors.red800};}`, `.action.__jsx-style-dynamic-selector:focus{outline:3px solid ${theme.focus};outline-offset:2px;}`]));\n};\nFileListItem.propTypes = {\n  onRemove: PropTypes.func.isRequired,\n  cancelText: PropTypes.string,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  label: PropTypes.string,\n  loading: PropTypes.bool,\n  removeText: PropTypes.string,\n  onCancel: PropTypes.func\n};\nexport { FileListItem };","import { useConfig, useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { FileInput, FileList, FileListItem, Field as UIField, Help } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport css from './ImageField.module.css';\nconst fileToBase64 = file => {\n  const reader = new FileReader();\n  return new Promise((resolve, reject) => {\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n  });\n};\nexport function ImageField() {\n  var _input$value, _input$value2, _input$value3, _input$value4;\n  const dataEngine = useDataEngine();\n  const fieldName = 'image';\n  const {\n    input,\n    meta\n  } = useField(fieldName, {\n    format: value => value\n  });\n  const [fileBase64, setFileBase64] = useState();\n  const uploadFile = async fileToUpload => {\n    const fileToUploadDetails = {\n      name: fileToUpload.name,\n      size: fileToUpload.size\n    };\n    updateInputValue({\n      ...fileToUploadDetails,\n      id: undefined,\n      error: undefined\n    });\n    try {\n      const postResponse = await dataEngine.mutate({\n        resource: 'fileResources',\n        type: 'create',\n        data: {\n          file: fileToUpload,\n          domain: 'ORG_UNIT'\n        }\n      });\n      updateInputValue({\n        ...fileToUploadDetails,\n        id: postResponse.response.fileResource.id,\n        error: undefined\n      });\n    } catch (e) {\n      console.error(e);\n      updateInputValue({\n        ...fileToUploadDetails,\n        id: undefined,\n        error: e.toString()\n      });\n    }\n  };\n  const updateInputValue = newInputValue => {\n    input.onChange(newInputValue);\n    input.onBlur();\n  };\n  const deleteFile = () => {\n    setFileBase64(undefined);\n    input.onChange(undefined);\n    input.onBlur();\n  };\n  const handleChange = async _ref => {\n    let {\n      files\n    } = _ref;\n    const newFile = files[0];\n    if (newFile instanceof File) {\n      uploadFile(newFile);\n      const file64 = await fileToBase64(newFile);\n      setFileBase64(file64);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UIField, {\n    label: i18n.t('Image'),\n    name: \"image\",\n    error: meta.invalid,\n    valid: meta.valid,\n    validationText: (_input$value = input.value) === null || _input$value === void 0 ? void 0 : _input$value.error\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: css.fileInputWrapper\n  }, /*#__PURE__*/React.createElement(ImagePreview, {\n    fileBase64: fileBase64,\n    fileResource: input.value\n  }), /*#__PURE__*/React.createElement(FileInput, {\n    accept: \"image/*\",\n    buttonLabel: i18n.t('Upload an image'),\n    multiple: false,\n    name: input.name,\n    onChange: handleChange,\n    error: !!(input.value && input.value.error),\n    valid: !!(input.value && input.value.id)\n  })), /*#__PURE__*/React.createElement(FileList, null, ((_input$value2 = input.value) === null || _input$value2 === void 0 ? void 0 : _input$value2.id) && /*#__PURE__*/React.createElement(FileListItem, {\n    key: (_input$value3 = input.value) === null || _input$value3 === void 0 ? void 0 : _input$value3.id,\n    label: (_input$value4 = input.value) === null || _input$value4 === void 0 ? void 0 : _input$value4.name,\n    onRemove: deleteFile,\n    removeText: i18n.t('Remove')\n  })), /*#__PURE__*/React.createElement(Help, null, i18n.t('Max size 10MB. Supported file size are .jpg, .png, and .gif.')));\n}\nconst ImagePreview = _ref2 => {\n  let {\n    fileBase64,\n    fileResource\n  } = _ref2;\n  const baseUrl = useConfig().baseUrl;\n  if (fileBase64) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      src: fileBase64,\n      alt: i18n.t('Preview of current icon')\n    });\n  }\n  if (fileResource && fileResource.id) {\n    const src = `${baseUrl}/api/fileResources/${fileResource.id}/data`;\n    return /*#__PURE__*/React.createElement(\"img\", {\n      src: src,\n      alt: i18n.t('Preview of current icon')\n    });\n  }\n  return null;\n};","// extracted by mini-css-extract-plugin\nexport default {\"fileInputWrapper\":\"ImageField_fileInputWrapper__bNcWT\"};"],"names":["SvgUpload24","_ref","color","dataTest","ariaLabel","React","height","viewBox","width","xmlns","d","fill","propTypes","PropTypes","_defineProperty","e","r","t","i","Symbol","toPrimitive","call","TypeError","String","Number","_toPrimitive","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","FileInput","Component","constructor","super","arguments","this","createRef","ref","current","click","props","onChange","createHandlerPayload","onBlur","onFocus","onKeyDown","files","name","render","accept","buttonLabel","className","disabled","error","initialFocus","large","multiple","small","tabIndex","valid","warning","_JSXStyle","dynamic","spacers","dp8","dp4","cx","id","type","handleChange","Button","icon","IconUpload24","colors","grey700","handleBlur","onClick","handleClick","handleFocus","handleKeyDown","StatusIcon","sharedPropTypes","FileList","children","SvgAttachment16","FileListItem","label","onRemove","removeText","loading","onCancel","cancelText","grey900","red700","red800","theme","focus","CircularLoader","extrasmall","IconAttachment16","event","key","isRequired","fileToBase64","file","reader","FileReader","Promise","resolve","reject","readAsDataURL","onload","result","onerror","ImageField","_input$value","_input$value2","_input$value3","_input$value4","dataEngine","useDataEngine","input","meta","useField","format","fileBase64","setFileBase64","useState","updateInputValue","newInputValue","UIField","i18n","invalid","validationText","css","fileInputWrapper","ImagePreview","fileResource","async","newFile","File","fileToUploadDetails","fileToUpload","size","undefined","postResponse","mutate","resource","data","domain","response","console","toString","uploadFile","file64","deleteFile","Help","_ref2","baseUrl","useConfig","src","alt"],"sourceRoot":""}