"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[7556,2881,1410,3981,3756,7572,7921,6229,3827,1111],{77556:function(e,t,n){n.r(t),n.d(t,{Component:function(){return v}});var a=n(5292),r=n(28014),l=n(90591),o=n(6866),i=n(72176),m=n(50445),u=n(14571),s=n(87899),c=n(49394),d=n(16680),E=n(36229),p=n(42881);const f=`/${(0,d.HR)(d.Vr.dataElementGroupSet)}`;const h={resource:"dataElementGroupSets",type:"create",data:e=>e};function v(){const e=(0,a.ow)(),t=(0,u.Zp)(),n=(0,c.yZ)(),l=(p=n.data,{name:"",shortName:"",code:"",description:"",compulsory:!1,dataDimension:!1,dataElementGroups:[],attributeValues:(0,i.useMemo)((()=>p.map((e=>({attribute:e,value:""})))),[p])});var p;return i.createElement(s.aH,{queryResponse:n,label:r.A.t("Custom attributes")},i.createElement(m.lV,{validateOnBlur:!0,onSubmit:async n=>{try{await e.mutate(h,{variables:n})}catch(a){return{[o.Ym]:a.toString()}}t(f)},validate:e=>(0,d.tf)(E.dataElementGroupSetSchema,e),initialValues:l},(e=>{let{handleSubmit:n,submitting:a,submitError:r}=e;return i.createElement("form",{onSubmit:n},i.createElement(F,{submitError:r,submitting:a,onCancelClick:()=>t(f)}))})))}function F(e){let{submitError:t,onCancelClick:n,submitting:a}=e;const o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{var e;t&&(null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[t]),i.createElement(i.Fragment,null,i.createElement("div",{className:p.default.form},i.createElement(E.DataElementGroupSetFormFields,null),t&&i.createElement(s.Hl,null,i.createElement("div",{ref:o},i.createElement(l.I,{error:!0,title:r.A.t("Something went wrong when submitting the form")},t))),i.createElement(s.Hl,null,i.createElement(s.Hn,{cancelLabel:r.A.t("Exit without saving"),submitLabel:r.A.t("Create data element group"),submitting:a,onCancelClick:n}))))}},23981:function(e,t,n){n.r(t),n.d(t,{CompulsoryField:function(){return i}});var a=n(28014),r=n(52791),l=n(72176),o=n(50445);function i(){return l.createElement(o.D0,{component:r.o,dataTest:"dataelementsformfields-compulsory",name:"compulsory",label:a.A.t("Compulsory"),type:"checkbox",validateFields:[]})}},33756:function(e,t,n){n.r(t),n.d(t,{DataDimensionField:function(){return i}});var a=n(28014),r=n(52791),l=n(72176),o=n(50445);function i(){return l.createElement(o.D0,{component:r.o,dataTest:"dataelementsformfields-datadimension",name:"dataDimension",label:a.A.t("Data dimension"),type:"checkbox",validateFields:[]})}},97572:function(e,t,n){n.r(t),n.d(t,{DataElementGroupsField:function(){return d}});var a=n(28014),r=n(73968),l=n(21039),o=n(24394),i=n(72176),m=n(50445),u=n(14571),s=n(87899),c=n(57921);function d(){var e;const t="dataElementGroups",{input:n,meta:d}=(0,m.Mt)(t,{multiple:!0,format:e=>null===e||void 0===e?void 0:e.map((e=>e.id)),parse:e=>e.map((e=>({id:e}))),validateFields:[]}),E=(0,u.$P)("/dataElementGroups/new"),p=(0,i.useRef)({refetch:()=>{throw new Error("Not initialized")}}),f=i.createElement("p",{className:c.default.dataElementGroupsPickedHeader},a.A.t("Selected data element groups")),h=i.createElement("div",{className:c.default.dataElementGroupsOptionsFooter},i.createElement(r.v,null,i.createElement(l.$,{small:!0,onClick:p.current.refetch},a.A.t("Refresh list")),i.createElement(l.$,{small:!0,onClick:()=>window.open(E,"_blank")},a.A.t("Add new"))));return i.createElement(o.D,{dataTest:"dataelementsformfields-dataElementGroupsets",error:!!d.error,validationText:null===(e=d.error)||void 0===e?void 0:e.toString(),name:t},i.createElement(s.wn,{ref:p,selected:n.value,onChange:e=>{let{selected:t}=e;return n.onChange(t)},rightHeader:f,leftFooter:h}))}},11410:function(e,t,n){n.r(t),n.d(t,{CompulsoryField:function(){return a.CompulsoryField},DataDimensionField:function(){return r.DataDimensionField},DataElementGroupsField:function(){return l.DataElementGroupsField}});var a=n(23981),r=n(33756),l=n(97572)},33827:function(e,t,n){n.r(t),n.d(t,{DataElementGroupSetFormFields:function(){return s}});var a=n(28014),r=n(72176),l=n(87899),o=n(49394),i=n(16680),m=n(11410);const u=i.Vr.dataElementGroupSet;function s(){return r.createElement(r.Fragment,null,r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Basic information")),r.createElement(l.hK,null,a.A.t("Set up the information for this data element group")),r.createElement(o.Vd,null),r.createElement(l.Ys,null,r.createElement(o.zO,{schemaSection:u,helpText:a.A.t("Explain the purpose of this data element group.")})),r.createElement(l.Ys,null,r.createElement(m.CompulsoryField,null)),r.createElement(l.Ys,null,r.createElement(m.DataDimensionField,null))),r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Data element groups")),r.createElement(l.hK,null,""),r.createElement(l.Ys,null,r.createElement(m.DataElementGroupsField,null))),r.createElement(l.Ot,{schemaSection:u}))}},61111:function(e,t,n){n.r(t),n.d(t,{dataElementGroupSetSchema:function(){return r}});var a=n(73044);const r=a.z.object({name:a.z.string().trim(),shortName:a.z.string().trim(),code:a.z.string().trim(),description:a.z.string().trim(),dataElements:a.z.array(a.z.object({id:a.z.string()}))}).partial()},36229:function(e,t,n){n.r(t),n.d(t,{DataElementGroupSetFormFields:function(){return a.DataElementGroupSetFormFields},dataElementGroupSetSchema:function(){return r.dataElementGroupSetSchema}});var a=n(33827),r=n(61111)},42881:function(e,t,n){n.r(t),t.default={form:"New_form__VsLzA"}},57921:function(e,t,n){n.r(t),t.default={dataElementsOptionsFooter:"DataElementGroupsField_dataElementsOptionsFooter__l9fmA",dataElementsPickedHeader:"DataElementGroupsField_dataElementsPickedHeader__uWdRL"}}}]);
//# sourceMappingURL=7556.23ec4891.chunk.js.map