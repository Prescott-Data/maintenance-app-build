"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[2077],{82332:function(e,t,a){a.d(t,{v:function(){return d}});var n=a(28014),l=a(18707),r=a(72176),i=a(50445),o=a(16680);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(null,arguments)}function d(e){let{name:t,label:a,required:d,...c}=e;const u=(0,o.hJ)("keyCalendar"),m=o.s8,[p,v]=(0,r.useState)({error:!1,valid:!0}),{input:f}=(0,i.Mt)(t,{format:e=>e?e.substring(0,10):""});return r.createElement("div",null,r.createElement(l.p,s({inputWidth:"400px",date:f.value,name:t,required:d,calendar:u,onDateSelect:e=>{null!==e&&void 0!==e&&e.calendarDateString||!d?v((null===e||void 0===e?void 0:e.validation)||{error:!1,valid:!0}):v({error:!0,valid:!1,validationCode:"EMPTY",validationText:n.A.t("Required")}),f.onChange((null===e||void 0===e?void 0:e.calendarDateString)||""),f.onBlur()},timeZone:"utc",locale:m,format:"YYYY-MM-DD",onBlur:(e,t)=>f.onBlur(t),clearable:!0,label:d?`${a} (required)`:a},p,{valid:(null===p||void 0===p?void 0:p.valid)&&""!==(null===f||void 0===f?void 0:f.value)},c)))}},32587:function(e,t,a){a.r(t),a.d(t,{GeometryFields:function(){return c}});var n=a(28014),l=a(24394),r=a(29178),i=a(72176),o=a(50445),s=a(16680),d=a(31612);function c(){var e,t,a,c,u,m,p,v;const f="geometry",{input:g,meta:h}=(0,o.Mt)(f),y=e=>{let{longitude:t,latitude:a}=e;const n={type:"Point",coordinates:[t||void 0,a||void 0]};g.onChange(n),g.onBlur()};return g.value&&"Point"!==(null===(e=g.value)||void 0===e?void 0:e.type)?i.createElement(r.F,{placeholder:n.A.t("{{type}} coordinates are not editable",{type:(0,s.QA)(null===(v=g.value)||void 0===v?void 0:v.type)}),inputWidth:"400px",disabled:!0}):i.createElement(i.Fragment,null,i.createElement(l.D,{className:d.default.coordinateField,name:f,error:h.touched&&!!h.error,validationText:h.touched?null===(t=h.error)||void 0===t?void 0:t.coordinates:void 0},i.createElement(r.F,{onChange:e=>{var t,a;return y({longitude:e.value?parseFloat(e.value):void 0,latitude:null===(t=g.value)||void 0===t||null===(a=t.coordinates)||void 0===a?void 0:a[1]})},label:n.A.t("Longitude"),inputWidth:"400px",name:"longitude",type:"number",value:null===(a=g.value.coordinates)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.toString(),min:"-90",max:"90",step:"any"}),i.createElement(r.F,{onChange:e=>{var t,a;return y({longitude:null===(t=g.value)||void 0===t||null===(a=t.coordinates)||void 0===a?void 0:a[0],latitude:e.value?parseFloat(e.value):void 0})},inputWidth:"400px",label:n.A.t("Longitude"),name:"latitude",type:"number",value:null===(u=g.value)||void 0===u||null===(m=u.coordinates)||void 0===m||null===(p=m[1])||void 0===p?void 0:p.toString(),min:"-180",max:"180",step:"any"})))}},50794:function(e,t,a){a.r(t),a.d(t,{ImageField:function(){return P}});var n=a(5292),l=a(28014),r=a(24394),i=a(70659),o=a(13175),s=a(16812),d=a(41543),c=a(15360),u=a.n(c),m=a(72176);function p(e){let{color:t,dataTest:a,ariaLabel:n}=e;return m.createElement("svg",{height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",color:t,"data-test":a},m.createElement("path",{d:"M20 14a1 1 0 01.993.883L21 15v3a3 3 0 01-2.824 2.995L18 21H6a3 3 0 01-2.995-2.824L3 18v-3a1 1 0 011.993-.117L5 15v3a1 1 0 00.883.993L6 19h12a1 1 0 00.993-.883L19 18v-3a1 1 0 011-1zM12 4h.02c.023 0 .046.002.07.004L12 4a1.008 1.008 0 01.625.22l.082.073 4 4a1 1 0 01-1.32 1.497l-.094-.083L13 7.415V16a1 1 0 01-1.993.117L11 16V7.413L8.707 9.707a1 1 0 01-1.32.083l-.094-.083a1 1 0 01-.083-1.32l.083-.094 4-4 .082-.073.008-.007-.09.08A1.008 1.008 0 0111.982 4H12z",fill:"currentColor"}))}p.propTypes={color:u().string,dataTest:u().string,ariaLabel:u().string};var v=p,f=a(21039),g=a(45549),h=a(21346),y=a.n(h);function b(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class x extends m.Component{constructor(){super(...arguments),b(this,"ref",(0,m.createRef)()),b(this,"handleClick",(()=>{this.ref.current.click()})),b(this,"handleChange",(e=>{this.props.onChange&&this.props.onChange(this.createHandlerPayload(),e),this.ref.current.value=""})),b(this,"handleBlur",(e=>{this.props.onBlur&&this.props.onBlur(this.createHandlerPayload(),e)})),b(this,"handleFocus",(e=>{this.props.onFocus&&this.props.onFocus(this.createHandlerPayload(),e)})),b(this,"handleKeyDown",(e=>{this.props.onKeyDown&&this.props.onKeyDown(this.createHandlerPayload(),e)}))}createHandlerPayload(){return{files:this.ref.current.files,name:this.props.name}}render(){const{accept:e="*",buttonLabel:t,className:a,dataTest:n="dhis2-uicore-fileinput",disabled:l,error:r,initialFocus:d,large:c,multiple:u,name:p,small:h,tabIndex:b,valid:x,warning:E}=this.props;return m.createElement("div",{"data-test":n,className:i.default.dynamic([["1746996489",[o.Q.dp8,o.Q.dp4]]])+" "+(y()("file-input",a)||"")},m.createElement("div",{className:i.default.dynamic([["1746996489",[o.Q.dp8,o.Q.dp4]]])},m.createElement("input",{id:p,name:p,type:"file",ref:this.ref,onChange:this.handleChange,accept:e,multiple:u,disabled:l,"data-test":`${n}-input`,className:i.default.dynamic([["1746996489",[o.Q.dp8,o.Q.dp4]]])}),m.createElement(f.$,{disabled:l,icon:m.createElement(v,{color:s.T.grey700}),initialFocus:d,large:c,onBlur:this.handleBlur,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,small:h,tabIndex:b,type:"button"},t)),m.createElement(g.k,{error:r,valid:x,warning:E}),m.createElement(i.default,{id:"1746996489",dynamic:[o.Q.dp8,o.Q.dp4]},["input.__jsx-style-dynamic-selector{display:none;}",`.file-input.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:${o.Q.dp8};padding-bottom:${o.Q.dp4};}`]))}}b(x,"defaultProps",{accept:"*",dataTest:"dhis2-uicore-fileinput"}),x.propTypes={accept:u().string,buttonLabel:u().string,className:u().string,dataTest:u().string,disabled:u().bool,error:d.statusPropType,initialFocus:u().bool,large:d.sizePropType,multiple:u().bool,name:u().string,small:d.sizePropType,tabIndex:u().string,valid:d.statusPropType,warning:d.statusPropType,onBlur:u().func,onChange:u().func,onFocus:u().func,onKeyDown:u().func};const E=e=>{let{children:t,className:a,dataTest:n="dhis2-uicore-filelist"}=e;return m.createElement("div",{"data-test":n,className:"jsx-2770071620 "+(a||"")},t,m.createElement(i.default,{id:"2770071620"},["div.jsx-2770071620{padding-top:4px;}",".file-input+div.jsx-2770071620{padding-top:0;}"]))};E.propTypes={children:u().node,className:u().string,dataTest:u().string};var w=a(25431);function T(e){let{color:t,dataTest:a,ariaLabel:n}=e;return m.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:t,"data-test":a},m.createElement("path",{d:"M7 1a3 3 0 012.995 2.824L10 4v7a2 2 0 01-3.995.15L6 11V5a.5.5 0 01.992-.09L7 5v6a1 1 0 001.993.117L9 11V4a2 2 0 00-3.995-.15L5 4v7a3 3 0 005.995.176L11 11V5a.5.5 0 01.992-.09L12 5v6a4 4 0 01-7.995.2L4 11V4a3 3 0 013-3z",fill:"currentColor"}))}T.propTypes={color:u().string,dataTest:u().string,ariaLabel:u().string};var A=T,k=a(64349);const _=e=>{let{className:t,label:a,onRemove:n,removeText:l,loading:r,onCancel:d,cancelText:c,dataTest:u="dhis2-uicore-filelistitem"}=e;return m.createElement("p",{"data-test":u,className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" "+(y()("selected-file",t)||"")},m.createElement("span",{className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" icon"},r?m.createElement(k.F,{extrasmall:!0}):m.createElement(A,{color:s.T.grey700})),m.createElement("span",{className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" text"},m.createElement("span",{className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" label"},a),r&&d&&c&&m.createElement("span",{onClick:e=>d({},e),"data-test":`${u}-cancel`,className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" action"},c),!r&&m.createElement("span",{onClick:e=>n({},e),"data-test":`${u}-remove`,tabIndex:0,onKeyDown:e=>{n&&("Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||n({},e))},className:i.default.dynamic([["513536609",[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]]])+" action"},l)),m.createElement(i.default,{id:"513536609",dynamic:[o.Q.dp4,s.T.grey900,s.T.grey700,s.T.red700,s.T.red800,w.w.focus]},[`p.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;padding-top:${o.Q.dp4};}`,"span.__jsx-style-dynamic-selector{display:inline-block;}",".icon.__jsx-style-dynamic-selector{margin-inline-end:4px;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-top:1px;}",".text.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;}",`.label.__jsx-style-dynamic-selector{font-size:14px;color:${s.T.grey900};word-break:break-all;}`,".label.__jsx-style-dynamic-selector::after{content:' ';display:inline-block;width:12px;}",`.action.__jsx-style-dynamic-selector{font-size:12px;line-height:12px;margin-top:0;-webkit-text-decoration:underline;text-decoration:underline;cursor:pointer;color:${s.T.grey700};}`,`.action.__jsx-style-dynamic-selector:hover{color:${s.T.red700};}`,`.action.__jsx-style-dynamic-selector:active{color:${s.T.red800};}`,`.action.__jsx-style-dynamic-selector:focus{outline:3px solid ${w.w.focus};outline-offset:2px;}`]))};_.propTypes={onRemove:u().func.isRequired,cancelText:u().string,className:u().string,dataTest:u().string,label:u().string,loading:u().bool,removeText:u().string,onCancel:u().func};var L=a(66123),C=a(50445),F=a(57334);const N=e=>{const t=new FileReader;return new Promise(((a,n)=>{t.readAsDataURL(e),t.onload=()=>a(t.result),t.onerror=n}))};function P(){var e,t,a,i;const o=(0,n.ow)(),{input:s,meta:d}=(0,C.Mt)("image",{format:e=>e}),[c,u]=(0,m.useState)(),p=e=>{s.onChange(e),s.onBlur()};return m.createElement(r.D,{label:l.A.t("Image"),name:"image",error:d.invalid,valid:d.valid,validationText:null===(e=s.value)||void 0===e?void 0:e.error},m.createElement("div",{className:F.default.fileInputWrapper},m.createElement(D,{fileBase64:c,fileResource:s.value}),m.createElement(x,{accept:"image/*",buttonLabel:l.A.t("Upload an image"),multiple:!1,name:s.name,onChange:async e=>{let{files:t}=e;const a=t[0];if(a instanceof File){(async e=>{const t={name:e.name,size:e.size};p({...t,id:void 0,error:void 0});try{const a=await o.mutate({resource:"fileResources",type:"create",data:{file:e,domain:"ORG_UNIT"}});p({...t,id:a.response.fileResource.id,error:void 0})}catch(a){console.error(a),p({...t,id:void 0,error:a.toString()})}})(a);const e=await N(a);u(e)}},error:!(!s.value||!s.value.error),valid:!(!s.value||!s.value.id)})),m.createElement(E,null,(null===(t=s.value)||void 0===t?void 0:t.id)&&m.createElement(_,{key:null===(a=s.value)||void 0===a?void 0:a.id,label:null===(i=s.value)||void 0===i?void 0:i.name,onRemove:()=>{u(void 0),s.onChange(void 0),s.onBlur()},removeText:l.A.t("Remove")})),m.createElement(L._,null,l.A.t("Max size 10MB. Supported file size are .jpg, .png, and .gif.")))}const D=e=>{let{fileBase64:t,fileResource:a}=e;const r=(0,n.UK)().baseUrl;if(t)return m.createElement("img",{src:t,alt:l.A.t("Preview of current icon")});if(a&&a.id){const e=`${r}/api/fileResources/${a.id}/data`;return m.createElement("img",{src:e,alt:l.A.t("Preview of current icon")})}return null}},42077:function(e,t,a){a.r(t),a.d(t,{OrganisationUnitFormField:function(){return f}});var n=a(28014),l=a(30139),r=a(87949),i=a(72176),o=a(50445),s=a(87899),d=a(82332),c=a(16680),u=a(32587),m=a(50794),p=a(4100);const v=c.Vr.organisationUnit;function f(){const e=(0,c.hJ)("keyAllowObjectAssignment"),t=c.In.organisationUnit;return i.createElement(i.Fragment,null,i.createElement(s.Hl,null,i.createElement(s.L7,null,i.createElement("label",{htmlFor:"parent"},n.A.t("Placement in hierarchy"))),i.createElement(s.hK,null,n.A.t("Choose where this new organisation unit should be placed in the existing hierarchy")),i.createElement(s.Ys,null,i.createElement(p.OrganisationUnitSelector,null))),i.createElement(s.Hl,null,i.createElement(s.L7,null,n.A.t("Basic information")),i.createElement(s.hK,null,n.A.t("Set up the basic information for this organisation unit")),i.createElement(s.Vd,null),i.createElement(s.Ys,null,i.createElement(d.v,{name:"openingDate",label:n.A.t("Opening date"),required:!0})),i.createElement(s.Ys,null,i.createElement(d.v,{name:"closedDate",label:n.A.t("Closed date")})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:l.r,inputWidth:"400px",label:n.A.t("Comment"),name:"comment"})),i.createElement(s.Ys,null,i.createElement(m.ImageField,null)),i.createElement(s.Ys,null,i.createElement(s.zO,{schemaSection:v})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:r.f,inputWidth:"400px",label:n.A.t("Contact person"),name:"contactPerson"})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:r.f,inputWidth:"400px",label:n.A.t("Address"),name:"address"})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:r.f,inputWidth:"400px",label:n.A.t("Email"),name:"email",type:"email"})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:r.f,inputWidth:"400px",label:n.A.t("Phone number"),name:"phoneNumber",type:"tel"})),i.createElement(s.Ys,null,i.createElement(o.D0,{component:r.f,inputWidth:"400px",label:n.A.t("URL"),name:"url",type:"url",helpText:n.A.t("A web link that provides extra information.")}))),i.createElement(s.Hl,null,i.createElement(s.L7,null,n.A.t("Location")),i.createElement(s.hK,null,n.A.t("Set up the organisation unit location.")),i.createElement(u.GeometryFields,null)),e&&i.createElement(s.Hl,null,i.createElement(s.L7,null,n.A.t("Reference assignment")),i.createElement(s.hK,null,n.A.t("Assign the organisation unit to related objects.")),i.createElement(s.Ys,null,i.createElement(s.xN,{name:"dataSets",query:{resource:"dataSets"},leftHeader:n.A.t("Available data sets"),rightHeader:n.A.t("Selected data sets"),filterPlaceholder:n.A.t("Filter available data sets"),filterPlaceholderPicked:n.A.t("Filter selected data sets")})),i.createElement(s.Ys,null,i.createElement(s.xN,{name:"programs",query:{resource:"programs"},leftHeader:n.A.t("Available programs"),rightHeader:n.A.t("Selected programs"),filterPlaceholder:n.A.t("Filter available programs"),filterPlaceholderPicked:n.A.t("Filter selected programs")}))),i.createElement(s.Ot,{schemaSection:t}))}},4100:function(e,t,a){a.r(t),a.d(t,{OrganisationUnitSelector:function(){return f}});var n=a(28014),l=a(24394),r=a(42002),i=a(90591),o=a(15360),s=a.n(o),d=a(72176);function c(e){let{color:t,dataTest:a,ariaLabel:n}=e;return d.createElement("svg",{height:16,viewBox:"0 0 16 16",width:16,xmlns:"http://www.w3.org/2000/svg",color:t,"data-test":a},d.createElement("path",{d:"M8 1a7 7 0 110 14A7 7 0 018 1zm0 1a6 6 0 100 12A6 6 0 008 2zm.5 5v4H10v1H6v-1h1.5V7zM8 4a.75.75 0 110 1.5A.75.75 0 018 4z",fill:"currentColor"}))}c.propTypes={color:s().string,dataTest:s().string,ariaLabel:s().string};var u=c,m=a(50445),p=a(64125),v=a(91520);function f(){var e,t;const{input:a,meta:o}=(0,m.Mt)("parent",{format:e=>e}),s=(0,p.f)(),c=s.map((e=>e.id)),f=s.map((e=>e.path)),[g,h]=(0,d.useState)(null!==(e=a.value)&&void 0!==e&&e.path?[a.value.path]:[]);return d.createElement(l.D,{name:"parent",error:o.touched&&o.error,validationText:o.touched?o.error:void 0},s.length>0?d.createElement(d.Fragment,null,d.createElement("div",{className:v.default.selectedOrgUnitBox},d.createElement(r.f,{onChange:e=>{a.onChange({displayName:e.displayName,id:e.id,path:e.path}),h([e.path]),a.onBlur()},singleSelection:!0,roots:c,selected:g,initiallyExpanded:[...f,...g]})),(null===(t=a.value)||void 0===t?void 0:t.displayName)&&d.createElement("div",{className:v.default.selectedOrgUnitInfo},d.createElement(u,null),d.createElement("p",null,n.A.t("Organisation unit will be positioned inside {{displayName}}",{displayName:a.value.displayName})))):d.createElement(i.I,{title:n.A.t("Creating first organisation unit")},n.A.t("This is the first organisation unit and will be created as the root of the hierarchy.")))}},31612:function(e,t,a){a.r(t),t.default={coordinateField:"GeometryFields_coordinateField__jZie1"}},57334:function(e,t,a){a.r(t),t.default={fileInputWrapper:"ImageField_fileInputWrapper__bNcWT"}},91520:function(e,t,a){a.r(t),t.default={selectedOrgUnitInfo:"OrganisationUnitSelector_selectedOrgUnitInfo__CWLRb",selectedOrgUnitBox:"OrganisationUnitSelector_selectedOrgUnitBox__Lli-s"}}}]);
//# sourceMappingURL=2077.7585c50a.chunk.js.map