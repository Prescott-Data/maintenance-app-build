{"version":3,"file":"static/js/9394.77696d0c.chunk.js","mappings":"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","sources":["D2App/pages/organisationUnits/list/OrganisationUnitListActions.js","D2App/pages/organisationUnits/list/OrganisationUnitRow.js","webpack://@dhis2/app-shell/./src/D2App/pages/organisationUnits/list/OrganisationUnitList.module.css?1639"],"sourcesContent":["import i18n from '@dhis2/d2-i18n';\nimport { Button, FlyoutMenu, IconEdit16, IconMore16, IconMore24, MenuItem, Popover } from '@dhis2/ui';\nimport React, { useState, useRef } from 'react';\nimport { useQueryClient } from 'react-query';\nimport { useHref, useLinkClickHandler } from 'react-router-dom';\nimport { DeleteAction } from '../../../components/sectionList/listActions/DeleteAction';\nimport { ListActions, ActionEdit } from '../../../components/sectionList/listActions/SectionListActions';\nimport { TooltipWrapper } from '../../../components/tooltip';\nimport { TOOLTIPS } from '../../../lib';\nimport { canDeleteModel } from '../../../lib/models/access';\nexport const OrganisationUnitListActions = _ref => {\n  let {\n    model,\n    onShowDetailsClick\n  } = _ref;\n  const deletable = canDeleteModel(model);\n  const queryClient = useQueryClient();\n  const handleDeleteSuccess = () => {\n    queryClient.invalidateQueries({\n      queryKey: [{\n        resource: 'organisationUnits'\n      }]\n    });\n  };\n  return /*#__PURE__*/React.createElement(ListActions, null, /*#__PURE__*/React.createElement(ActionEdit, {\n    modelId: model.id\n  }), /*#__PURE__*/React.createElement(OrganisationUnitActionMore, {\n    deletable: deletable,\n    model: model\n    // onTranslateClick={() => onOpenTranslationClick(model)}\n    ,\n    onDeleteSuccess: handleDeleteSuccess,\n    onShowDetailsClick: onShowDetailsClick\n  }));\n};\nconst OrganisationUnitActionMore = _ref2 => {\n  let {\n    deletable,\n    model,\n    // onTranslateClick,\n    onDeleteSuccess,\n    onShowDetailsClick\n  } = _ref2;\n  const [open, setOpen] = useState(false);\n  const ref = useRef(null);\n  const href = useHref(model.id, {\n    relative: 'path'\n  });\n  const handleEditClick = useLinkClickHandler(model.id);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    onClick: () => setOpen(!open),\n    dataTest: \"row-actions-menu-button\",\n    icon: /*#__PURE__*/React.createElement(IconMore24, null)\n  }), open && /*#__PURE__*/React.createElement(Popover, {\n    arrow: false,\n    placement: \"bottom-end\",\n    reference: ref,\n    onClickOutside: () => setOpen(false),\n    dataTest: \"row-actions-menu\"\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, null, /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    label: i18n.t('Show details'),\n    icon: /*#__PURE__*/React.createElement(IconMore16, null),\n    onClick: () => {\n      onShowDetailsClick(model);\n      setOpen(false);\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    label: i18n.t('Edit'),\n    icon: /*#__PURE__*/React.createElement(IconEdit16, null),\n    onClick: (_, e) => {\n      handleEditClick(e);\n      setOpen(false);\n    },\n    target: \"_blank\",\n    href: href\n  }), /*#__PURE__*/React.createElement(TooltipWrapper, {\n    condition: !deletable,\n    content: TOOLTIPS.noDeleteAccess\n  }, /*#__PURE__*/React.createElement(DeleteAction, {\n    model: model,\n    disabled: !deletable,\n    onDeleteSuccess: () => {\n      onDeleteSuccess();\n      setOpen(false);\n    },\n    onCancel: () => setOpen(false)\n  })))));\n};","import i18n from '@dhis2/d2-i18n';\nimport { Button, Checkbox, DataTableCell, DataTableRow, IconArrowDown16, IconArrowUp16, IconChevronDown16, IconChevronRight16 } from '@dhis2/ui';\nimport { flexRender } from '@tanstack/react-table';\nimport React from 'react';\nimport css from './OrganisationUnitList.module.css';\nimport { OrganisationUnitListActions } from './OrganisationUnitListActions';\nexport const OrganisationUnitRow = _ref => {\n  let {\n    row,\n    toggleShowAll,\n    showAllActive,\n    isFiltering,\n    fetchNextPage,\n    onShowDetailsClick,\n    hasErrored\n  } = _ref;\n  const parentRow = row.getParentRow();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataTableRow, {\n    key: row.id\n  }, /*#__PURE__*/React.createElement(DataTableCell, null, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      paddingLeft: `${row.depth * 2}rem`,\n      display: 'flex'\n    }\n  }, row.getCanExpand() ? /*#__PURE__*/React.createElement(React.Fragment, null, isFiltering && (showAllActive || row.original.childCount !== row.subRows.length) && /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: () => {\n      toggleShowAll(row.original.id);\n    },\n    icon: showAllActive ? /*#__PURE__*/React.createElement(IconArrowUp16, null) : /*#__PURE__*/React.createElement(IconArrowDown16, null)\n  }, \"Show all\"), /*#__PURE__*/React.createElement(Button, {\n    className: css.expandButton,\n    secondary: true,\n    type: \"button\",\n    dataTest: \"row-expand-icon\",\n    loading: row.getIsExpanded() && row.subRows.length < 1 && !hasErrored,\n    icon: row.getIsExpanded() ? /*#__PURE__*/React.createElement(IconChevronDown16, null) : /*#__PURE__*/React.createElement(IconChevronRight16, null),\n    onClick: row.getToggleExpandedHandler()\n  })) : null, /*#__PURE__*/React.createElement(Checkbox, {\n    checked: row.getIsSelected(),\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return row.toggleSelected(checked);\n    }\n  }))), row.getVisibleCells().map(cell => {\n    return /*#__PURE__*/React.createElement(DataTableCell, {\n      key: cell.id\n    }, flexRender(cell.column.columnDef.cell, cell.getContext()));\n  }), /*#__PURE__*/React.createElement(DataTableCell, null, /*#__PURE__*/React.createElement(OrganisationUnitListActions, {\n    model: row.original,\n    onShowDetailsClick: onShowDetailsClick\n    // onOpenTranslationClick={()=>{}}\n  }))), !isFiltering && parentRow && parentRow.getIsExpanded() && parentRow.subRows.length < (parentRow === null || parentRow === void 0 ? void 0 : parentRow.original.childCount) && row === parentRow.subRows[parentRow.subRows.length - 1] && /*#__PURE__*/React.createElement(DataTableRow, null, /*#__PURE__*/React.createElement(DataTableCell, {\n    colSpan: \"100\",\n    style: {\n      textAlign: 'center'\n    },\n    onClick: () => fetchNextPage(parentRow.original.id)\n  }, i18n.t('Load more for {{orgUnitName}}', {\n    orgUnitName: parentRow.original.displayName\n  }))));\n};","// extracted by mini-css-extract-plugin\nexport default {\"expandButton\":\"OrganisationUnitList_expandButton__AjbgN\",\"listDetailsWrapper\":\"OrganisationUnitList_listDetailsWrapper__eX9Q3\"};"],"names":["OrganisationUnitListActions","_ref","model","onShowDetailsClick","deletable","canDeleteModel","queryClient","useQueryClient","React","ListActions","ActionEdit","modelId","id","OrganisationUnitActionMore","onDeleteSuccess","handleDeleteSuccess","invalidateQueries","queryKey","resource","_ref2","open","setOpen","useState","ref","useRef","href","useHref","relative","handleEditClick","useLinkClickHandler","Button","small","secondary","onClick","dataTest","icon","IconMore24","Popover","arrow","placement","reference","onClickOutside","FlyoutMenu","MenuItem","dense","label","i18n","t","IconMore16","IconEdit16","_","e","target","TooltipWrapper","condition","content","TOOLTIPS","noDeleteAccess","DeleteAction","disabled","onCancel","OrganisationUnitRow","row","toggleShowAll","showAllActive","isFiltering","fetchNextPage","hasErrored","parentRow","getParentRow","DataTableRow","key","DataTableCell","style","paddingLeft","depth","display","getCanExpand","original","childCount","subRows","length","IconArrowUp16","IconArrowDown16","className","css","expandButton","type","loading","getIsExpanded","IconChevronDown16","IconChevronRight16","getToggleExpandedHandler","Checkbox","checked","getIsSelected","onChange","toggleSelected","getVisibleCells","map","cell","flexRender","column","columnDef","getContext","colSpan","textAlign","orgUnitName","displayName"],"sourceRoot":""}