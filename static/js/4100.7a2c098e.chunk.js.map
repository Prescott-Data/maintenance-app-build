{"version":3,"file":"static/js/4100.7a2c098e.chunk.js","mappings":"4QAEA,SAASA,EAAUC,GACjB,IAAI,MACFC,EAAK,SACLC,EAAQ,UACRC,GACEH,EACJ,OAAoBI,EAAAA,cAAoB,MAAO,CAC7CC,OAAQ,GACRC,QAAS,YACTC,MAAO,GACPC,MAAO,6BACPP,MAAOA,EACP,YAAaC,GACCE,EAAAA,cAAoB,OAAQ,CAC1CK,EAAG,4HACHC,KAAM,iBAEV,CACAX,EAAUY,UAAY,CACpBV,MAAOW,IAAAA,OACPV,SAAUU,IAAAA,OACVT,UAAWS,IAAAA,QAEb,Q,iCClBO,SAASC,IACd,IAAIC,EAAcC,EAClB,MACM,MACJC,EAAK,KACLC,IACEC,EAAAA,EAAAA,IAJc,SAIM,CACtBC,OAAQC,GAASA,IAEbC,GAAmBC,EAAAA,EAAAA,KACnBC,EAAsBF,EAAiBG,KAAIC,GAAQA,EAAKC,KACxDC,EAAwBN,EAAiBG,KAAIC,GAAQA,EAAKG,QACzDC,EAAUC,IAAeC,EAAAA,EAAAA,UAA0C,QAAhCjB,EAAeE,EAAMI,aAAoC,IAAjBN,GAA2BA,EAAac,KAAO,CAACZ,EAAMI,MAAMQ,MAAQ,IAUtJ,OAAoBxB,EAAAA,cAAoB4B,EAAAA,EAAO,CAC7CC,KAAM,SACNC,MAAOjB,EAAKkB,SAAWlB,EAAKiB,MAC5BE,eAAgBnB,EAAKkB,QAAUlB,EAAKiB,WAAQG,GAC3ChB,EAAiBiB,OAAS,EAAiBlC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoB,MAAO,CAC9HmC,UAAWC,EAAAA,QAAQC,oBACLrC,EAAAA,cAAoBsC,EAAAA,EAAsB,CACxDC,SAhBmBC,IACnB5B,EAAM2B,SAAS,CACbE,YAAaD,EAAQC,YACrBnB,GAAIkB,EAAQlB,GACZE,KAAMgB,EAAQhB,OAEhBE,EAAY,CAACc,EAAQhB,OACrBZ,EAAM8B,QAAQ,EAUdC,iBAAiB,EACjBC,MAAOzB,EACPM,SAAUA,EACVoB,kBAAmB,IAAItB,KAA0BE,OACX,QAAjCd,EAAgBC,EAAMI,aAAqC,IAAlBL,OAA2B,EAASA,EAAc8B,cAA6BzC,EAAAA,cAAoB,MAAO,CACxJmC,UAAWC,EAAAA,QAAQU,qBACL9C,EAAAA,cAAoB+C,EAAY,MAAoB/C,EAAAA,cAAoB,IAAK,KAAMgD,EAAAA,EAAKC,EAAE,8DAA+D,CACvKR,YAAa7B,EAAMI,MAAMyB,iBACNzC,EAAAA,cAAoBkD,EAAAA,EAAW,CAClDC,MAAOH,EAAAA,EAAKC,EAAE,qCACbD,EAAAA,EAAKC,EAAE,0FACZ,C,+BC/CA,WAAgB,oBAAsB,sDAAsD,mBAAqB,qD","sources":["../../../node_modules/@dhis2/ui-icons/build/es/react/Info16.js","D2App/pages/organisationUnits/form/OrganisationUnitSelector.js","webpack://@dhis2/app-shell/./src/D2App/pages/organisationUnits/form/OrganisationUnitSelector.module.css?ec6a"],"sourcesContent":["import PropTypes from 'prop-types';\nimport * as React from 'react';\nfunction SvgInfo16(_ref) {\n  let {\n    color,\n    dataTest,\n    ariaLabel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    width: 16,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    color: color,\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 1a7 7 0 110 14A7 7 0 018 1zm0 1a6 6 0 100 12A6 6 0 008 2zm.5 5v4H10v1H6v-1h1.5V7zM8 4a.75.75 0 110 1.5A.75.75 0 018 4z\",\n    fill: \"currentColor\"\n  }));\n}\nSvgInfo16.propTypes = {\n  color: PropTypes.string,\n  dataTest: PropTypes.string,\n  ariaLabel: PropTypes.string\n};\nexport default SvgInfo16;","import i18n from '@dhis2/d2-i18n';\nimport { Field, NoticeBox, OrganisationUnitTree } from '@dhis2/ui';\nimport { IconInfo16 } from '@dhis2/ui-icons';\nimport React, { useState } from 'react';\nimport { useField } from 'react-final-form';\nimport { useCurrentUserRootOrgUnits } from '../../../lib/user/currentUserStore';\nimport classes from './OrganisationUnitSelector.module.css';\nexport function OrganisationUnitSelector() {\n  var _input$value, _input$value2;\n  const fieldName = 'parent';\n  const {\n    input,\n    meta\n  } = useField(fieldName, {\n    format: value => value\n  });\n  const userRootOrgUnits = useCurrentUserRootOrgUnits();\n  const userRootOrgUnitsIds = userRootOrgUnits.map(unit => unit.id);\n  const userRootOrgUnitsPaths = userRootOrgUnits.map(unit => unit.path);\n  const [selected, setSelected] = useState((_input$value = input.value) !== null && _input$value !== void 0 && _input$value.path ? [input.value.path] : []);\n  const handleChange = orgUnit => {\n    input.onChange({\n      displayName: orgUnit.displayName,\n      id: orgUnit.id,\n      path: orgUnit.path\n    });\n    setSelected([orgUnit.path]);\n    input.onBlur();\n  };\n  return /*#__PURE__*/React.createElement(Field, {\n    name: \"parent\",\n    error: meta.touched && meta.error,\n    validationText: meta.touched ? meta.error : undefined\n  }, userRootOrgUnits.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.selectedOrgUnitBox\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    onChange: handleChange,\n    singleSelection: true,\n    roots: userRootOrgUnitsIds,\n    selected: selected,\n    initiallyExpanded: [...userRootOrgUnitsPaths, ...selected]\n  })), ((_input$value2 = input.value) === null || _input$value2 === void 0 ? void 0 : _input$value2.displayName) && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.selectedOrgUnitInfo\n  }, /*#__PURE__*/React.createElement(IconInfo16, null), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Organisation unit will be positioned inside {{displayName}}', {\n    displayName: input.value.displayName\n  })))) : /*#__PURE__*/React.createElement(NoticeBox, {\n    title: i18n.t('Creating first organisation unit')\n  }, i18n.t('This is the first organisation unit and will be created as the root of the hierarchy.')));\n}","// extracted by mini-css-extract-plugin\nexport default {\"selectedOrgUnitInfo\":\"OrganisationUnitSelector_selectedOrgUnitInfo__CWLRb\",\"selectedOrgUnitBox\":\"OrganisationUnitSelector_selectedOrgUnitBox__Lli-s\"};"],"names":["SvgInfo16","_ref","color","dataTest","ariaLabel","React","height","viewBox","width","xmlns","d","fill","propTypes","PropTypes","OrganisationUnitSelector","_input$value","_input$value2","input","meta","useField","format","value","userRootOrgUnits","useCurrentUserRootOrgUnits","userRootOrgUnitsIds","map","unit","id","userRootOrgUnitsPaths","path","selected","setSelected","useState","Field","name","error","touched","validationText","undefined","length","className","classes","selectedOrgUnitBox","OrganisationUnitTree","onChange","orgUnit","displayName","onBlur","singleSelection","roots","initiallyExpanded","selectedOrgUnitInfo","IconInfo16","i18n","t","NoticeBox","title"],"sourceRoot":""}