{"version":3,"file":"static/js/5309.944464ad.chunk.js","mappings":"+OAMA,MAAMA,EAAQ,CACZC,OAAQ,CACNC,SAAU,eACVC,OAAQA,GAAUA,IAGTC,EAAYA,KACvB,MAAM,QACJC,EACAL,MAAOM,IACLC,EAAAA,EAAAA,MACEC,GAAgBC,EAAAA,EAAAA,MAChBC,GAASC,EAAAA,EAAAA,OACT,QACJC,EAAO,MACPC,EAAK,KACLC,IACEC,EAAAA,EAAAA,IAAaf,EAEjB,CACEgB,MAAM,IAaR,OAXAC,EAAAA,EAAAA,YAAU,KAGJX,EAAcY,WAGlBN,EAAQ,IACHJ,EACHW,OAAQd,EAAQe,KAAIC,IAAUC,EAAAA,EAAAA,IAAeZ,EAAQW,EAAOE,QAAOC,OAAOC,EAAAA,KAC1E,GACD,CAACb,EAASJ,EAAeH,EAASC,EAAcY,UAAWR,IAC1CgB,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBC,EAAAA,GAAoB,CACxGd,MAAOA,EACPC,KAAe,OAATA,QAA0B,IAATA,OAAkB,EAASA,EAAKb,OAAO2B,aAC9DC,MAAgB,OAATf,QAA0B,IAATA,OAAkB,EAASA,EAAKb,OAAO4B,MAC/DjB,QAASA,IACR,C","sources":["D2App/pages/dataElements/List.js"],"sourcesContent":["import { useDataQuery } from '@dhis2/app-runtime';\nimport React, { useEffect } from 'react';\nimport { SectionListWrapper } from '../../components';\nimport { useModelListView } from '../../components/sectionList/listView';\nimport { useSchemaFromHandle, useParamsForDataQuery, DEFAULT_FIELD_FILTERS } from '../../lib/';\nimport { getFieldFilter } from '../../lib/models/path';\nconst query = {\n  result: {\n    resource: 'dataElements',\n    params: params => params\n  }\n};\nexport const Component = () => {\n  const {\n    columns,\n    query: listViewQuery\n  } = useModelListView();\n  const initialParams = useParamsForDataQuery();\n  const schema = useSchemaFromHandle();\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(query,\n  // refetched on mount by effect below\n  {\n    lazy: true\n  });\n  useEffect(() => {\n    // wait to fetch until selected-columns are loaded\n    // so we dont fetch data multiple times\n    if (listViewQuery.isLoading) {\n      return;\n    }\n    refetch({\n      ...initialParams,\n      fields: columns.map(column => getFieldFilter(schema, column.path)).concat(DEFAULT_FIELD_FILTERS)\n    });\n  }, [refetch, initialParams, columns, listViewQuery.isLoading, schema]);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SectionListWrapper, {\n    error: error,\n    data: data === null || data === void 0 ? void 0 : data.result.dataElements,\n    pager: data === null || data === void 0 ? void 0 : data.result.pager,\n    refetch: refetch\n  }));\n};"],"names":["query","result","resource","params","Component","columns","listViewQuery","useModelListView","initialParams","useParamsForDataQuery","schema","useSchemaFromHandle","refetch","error","data","useDataQuery","lazy","useEffect","isLoading","fields","map","column","getFieldFilter","path","concat","DEFAULT_FIELD_FILTERS","React","SectionListWrapper","dataElements","pager"],"sourceRoot":""}