(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[8626,2289,3994,1336,7091,9761,8677,9394,492],{32289:function(e,a,t){"use strict";t.r(a),t.d(a,{Component:function(){return l}});var n=t(72176),s=t(23994);const l=()=>n.createElement(s.OrganisationUnitList,null)},56128:function(e,a,t){"use strict";var n=t(5292),s=t(34414),l=t(51594),r=t(72176),i=JSON.parse('{"singular":"organisationUnit","plural":"organisationUnits","name":"organisationUnit","displayName":"Organisation Unit","shareable":false,"dataShareable":false,"authorities":[{"type":"CREATE","authorities":["F_ORGANISATIONUNIT_ADD"]},{"type":"DELETE","authorities":["F_ORGANISATIONUNIT_DELETE"]}],"properties":{"parent":{"klass":"org.hisp.dhis.organisationunit.OrganisationUnit","propertyType":"REFERENCE","name":"parent","fieldName":"parent","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":true,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"cascade":"none","manyToMany":false,"oneToOne":false,"manyToOne":true,"oneToMany":false,"owningRole":"org.hisp.dhis.organisationunit.OrganisationUnit.parent","href":"https://debug.dhis2.org/dev/api/42/schemas/organisationUnit","relativeApiEndpoint":"/organisationUnits","apiEndpoint":"https://debug.dhis2.org/dev/api/42/organisationUnits","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"type":{"klass":"java.lang.String","propertyType":"TEXT","name":"type","fieldName":"type","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":2147483647,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"path":{"klass":"java.lang.String","propertyType":"TEXT","name":"path","fieldName":"path","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":true,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"lastUpdated":{"klass":"java.util.Date","propertyType":"DATE","name":"lastUpdated","fieldName":"lastUpdated","persisted":true,"description":"The date this object was last updated.","attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"children":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.organisationunit.OrganisationUnit","itemPropertyType":"REFERENCE","name":"child","fieldName":"children","persisted":true,"collectionName":"children","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"cascade":"none","manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":true,"inverseRole":"org.hisp.dhis.organisationunit.OrganisationUnit.children","href":"https://debug.dhis2.org/dev/api/42/schemas/organisationUnit","relativeApiEndpoint":"/organisationUnits","apiEndpoint":"https://debug.dhis2.org/dev/api/42/organisationUnits","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"translations":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.translation.Translation","itemPropertyType":"COMPLEX","name":"translation","fieldName":"translations","persisted":true,"collectionName":"translations","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"FALSE","transformation":"AUTO"},"propertyTransformer":false},"uid":{"klass":"java.lang.String","propertyType":"IDENTIFIER","name":"id","fieldName":"uid","persisted":true,"description":"The Unique Identifier for this Object.","attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":true,"required":false,"length":11,"max":11,"min":11,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"href":{"klass":"java.lang.String","propertyType":"URL","name":"href","fieldName":"href","persisted":false,"attribute":true,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"ancestors":{"klass":"java.util.List","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.organisationunit.OrganisationUnit","itemPropertyType":"REFERENCE","name":"organisationUnit","fieldName":"ancestors","persisted":false,"collectionName":"ancestors","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":true,"owner":false,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"href":"https://debug.dhis2.org/dev/api/42/schemas/organisationUnit","relativeApiEndpoint":"/organisationUnits","apiEndpoint":"https://debug.dhis2.org/dev/api/42/organisationUnits","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"groups":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.organisationunit.OrganisationUnitGroup","itemPropertyType":"REFERENCE","name":"organisationUnitGroup","fieldName":"groups","persisted":true,"collectionName":"organisationUnitGroups","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"cascade":"none","manyToMany":true,"oneToOne":false,"manyToOne":false,"oneToMany":false,"owningRole":"org.hisp.dhis.organisationunit.OrganisationUnitGroup.members","inverseRole":"org.hisp.dhis.organisationunit.OrganisationUnit.groups","href":"https://debug.dhis2.org/dev/api/42/schemas/organisationUnitGroup","relativeApiEndpoint":"/organisationUnitGroups","apiEndpoint":"https://debug.dhis2.org/dev/api/42/organisationUnitGroups","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"displayDescription":{"klass":"java.lang.String","propertyType":"TEXT","name":"displayDescription","fieldName":"displayDescription","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"image":{"klass":"org.hisp.dhis.fileresource.FileResource","propertyType":"REFERENCE","name":"image","fieldName":"image","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":true,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"cascade":"none","manyToMany":false,"oneToOne":false,"manyToOne":true,"oneToMany":false,"owningRole":"org.hisp.dhis.organisationunit.OrganisationUnit.image","href":"https://debug.dhis2.org/dev/api/42/schemas/fileResource","relativeApiEndpoint":"/fileResources","apiEndpoint":"https://debug.dhis2.org/dev/api/42/fileResources","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"lastUpdatedBy":{"klass":"org.hisp.dhis.user.User","propertyType":"REFERENCE","name":"lastUpdatedBy","fieldName":"lastUpdatedBy","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":true,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"cascade":"none","manyToMany":false,"oneToOne":false,"manyToOne":true,"oneToMany":false,"owningRole":"org.hisp.dhis.organisationunit.OrganisationUnit.lastUpdatedBy","href":"https://debug.dhis2.org/dev/api/42/schemas/user","relativeApiEndpoint":"/users","apiEndpoint":"https://debug.dhis2.org/dev/api/42/users","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":true},"hierarchyLevel":{"klass":"java.lang.Integer","propertyType":"INTEGER","name":"level","fieldName":"hierarchyLevel","persisted":true,"attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":2147483647,"max":2147483647,"min":-2147483648,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"created":{"klass":"java.util.Date","propertyType":"DATE","name":"created","fieldName":"created","persisted":true,"description":"The date this object was created.","attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"attributeValues":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.attribute.AttributeValue","itemPropertyType":"COMPLEX","name":"attributeValue","fieldName":"attributeValues","persisted":true,"collectionName":"attributeValues","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":true,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"sharing":{"klass":"org.hisp.dhis.user.sharing.Sharing","propertyType":"COMPLEX","name":"sharing","fieldName":"sharing","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"FALSE","transformation":"AUTO"},"propertyTransformer":false},"displayFormName":{"klass":"java.lang.String","propertyType":"TEXT","name":"displayFormName","fieldName":"displayFormName","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"users":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.user.User","itemPropertyType":"REFERENCE","name":"userItem","fieldName":"users","persisted":true,"collectionName":"users","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"cascade":"none","manyToMany":true,"oneToOne":false,"manyToOne":false,"oneToMany":false,"owningRole":"org.hisp.dhis.user.User.organisationUnits","inverseRole":"org.hisp.dhis.organisationunit.OrganisationUnit.users","href":"https://debug.dhis2.org/dev/api/42/schemas/user","relativeApiEndpoint":"/users","apiEndpoint":"https://debug.dhis2.org/dev/api/42/users","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"phoneNumber":{"klass":"java.lang.String","propertyType":"PHONENUMBER","name":"phoneNumber","fieldName":"phoneNumber","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":150,"max":150,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"name":{"klass":"java.lang.String","propertyType":"TEXT","name":"name","fieldName":"name","persisted":true,"description":"The name of this Object. Required and unique.","attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":true,"length":230,"max":230,"min":1,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":true,"translationKey":"NAME","i18nTranslationKey":"name","gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"dataSets":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.dataset.DataSet","itemPropertyType":"REFERENCE","name":"dataSet","fieldName":"dataSets","persisted":true,"collectionName":"dataSets","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"cascade":"none","manyToMany":true,"oneToOne":false,"manyToOne":false,"oneToMany":false,"owningRole":"org.hisp.dhis.dataset.DataSet.sources","inverseRole":"org.hisp.dhis.organisationunit.OrganisationUnit.dataSets","href":"https://debug.dhis2.org/dev/api/42/schemas/dataSet","relativeApiEndpoint":"/dataSets","apiEndpoint":"https://debug.dhis2.org/dev/api/42/dataSets","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"legendSets":{"klass":"java.util.List","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.legend.LegendSet","itemPropertyType":"REFERENCE","name":"legendSets","fieldName":"legendSets","persisted":false,"collectionName":"legendSets","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":true,"owner":false,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"href":"https://debug.dhis2.org/dev/api/42/schemas/legendSet","relativeApiEndpoint":"/legendSets","apiEndpoint":"https://debug.dhis2.org/dev/api/42/legendSets","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"programs":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"org.hisp.dhis.program.Program","itemPropertyType":"REFERENCE","name":"program","fieldName":"programs","persisted":true,"collectionName":"programs","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":true,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":true,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"cascade":"none","manyToMany":true,"oneToOne":false,"manyToOne":false,"oneToMany":false,"owningRole":"org.hisp.dhis.program.Program.organisationUnits","inverseRole":"org.hisp.dhis.organisationunit.OrganisationUnit.programs","href":"https://debug.dhis2.org/dev/api/42/schemas/program","relativeApiEndpoint":"/programs","apiEndpoint":"https://debug.dhis2.org/dev/api/42/programs","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"shortName":{"klass":"java.lang.String","propertyType":"TEXT","name":"shortName","fieldName":"shortName","persisted":true,"attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":true,"length":50,"max":50,"min":1,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":true,"translationKey":"SHORT_NAME","i18nTranslationKey":"short_name","gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"favorite":{"klass":"java.lang.Boolean","propertyType":"BOOLEAN","name":"favorite","fieldName":"favorite","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"dimensionItemType":{"klass":"org.hisp.dhis.common.DimensionItemType","propertyType":"CONSTANT","name":"dimensionItemType","fieldName":"dimensionItemType","persisted":false,"attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"constants":["DATA_ELEMENT","DATA_ELEMENT_OPERAND","INDICATOR","REPORTING_RATE","PROGRAM_DATA_ELEMENT","PROGRAM_ATTRIBUTE","PROGRAM_INDICATOR","PERIOD","ORGANISATION_UNIT","CATEGORY_OPTION","OPTION_GROUP","DATA_ELEMENT_GROUP","ORGANISATION_UNIT_GROUP","CATEGORY_OPTION_GROUP","EXPRESSION_DIMENSION_ITEM","SUBEXPRESSION_DIMENSION_ITEM"],"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"favorites":{"klass":"java.util.Set","propertyType":"COLLECTION","itemKlass":"java.lang.String","itemPropertyType":"TEXT","name":"favorite","fieldName":"favorites","persisted":false,"collectionName":"favorites","collectionWrapping":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":true,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"aggregationType":{"klass":"org.hisp.dhis.analytics.AggregationType","propertyType":"CONSTANT","name":"aggregationType","fieldName":"aggregationType","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"constants":["SUM","AVERAGE","AVERAGE_SUM_ORG_UNIT","LAST","LAST_AVERAGE_ORG_UNIT","LAST_LAST_ORG_UNIT","LAST_IN_PERIOD","LAST_IN_PERIOD_AVERAGE_ORG_UNIT","FIRST","FIRST_AVERAGE_ORG_UNIT","FIRST_FIRST_ORG_UNIT","COUNT","STDDEV","VARIANCE","MIN","MAX","MIN_SUM_ORG_UNIT","MAX_SUM_ORG_UNIT","NONE","CUSTOM","DEFAULT"],"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"access":{"klass":"org.hisp.dhis.security.acl.Access","propertyType":"COMPLEX","name":"access","fieldName":"access","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":true,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"FALSE","transformation":"AUTO"},"propertyTransformer":false},"code":{"klass":"java.lang.String","propertyType":"IDENTIFIER","name":"code","fieldName":"code","persisted":true,"description":"The unique code for this Object.","attribute":true,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":true,"required":false,"length":50,"max":50,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"displayName":{"klass":"java.lang.String","propertyType":"TEXT","name":"displayName","fieldName":"displayName","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"contactPerson":{"klass":"java.lang.String","propertyType":"TEXT","name":"contactPerson","fieldName":"contactPerson","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"description":{"klass":"java.lang.String","propertyType":"TEXT","name":"description","fieldName":"description","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":2147483647,"max":2147483647,"min":1,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":true,"translationKey":"DESCRIPTION","i18nTranslationKey":"description","gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"displayShortName":{"klass":"java.lang.String","propertyType":"TEXT","name":"displayShortName","fieldName":"displayShortName","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"queryMods":{"klass":"org.hisp.dhis.common.QueryModifiers","propertyType":"COMPLEX","name":"queryMods","fieldName":"queryMods","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":1.7976931348623157e+308,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"formName":{"klass":"java.lang.String","propertyType":"TEXT","name":"formName","fieldName":"formName","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":2147483647,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"openingDate":{"klass":"java.util.Date","propertyType":"DATE","name":"openingDate","fieldName":"openingDate","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":true,"length":255,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"email":{"klass":"java.lang.String","propertyType":"EMAIL","name":"email","fieldName":"email","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":150,"max":150,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"address":{"klass":"java.lang.String","propertyType":"TEXT","name":"address","fieldName":"address","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"dimensionItem":{"klass":"java.lang.String","propertyType":"TEXT","name":"dimensionItem","fieldName":"dimensionItem","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"memberCount":{"klass":"java.lang.Integer","propertyType":"INTEGER","name":"memberCount","fieldName":"memberCount","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"max":2147483647,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"leaf":{"klass":"java.lang.Boolean","propertyType":"BOOLEAN","name":"leaf","fieldName":"leaf","persisted":false,"attribute":true,"simple":true,"collection":false,"ordered":false,"owner":false,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"url":{"klass":"java.lang.String","propertyType":"URL","name":"url","fieldName":"url","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"max":255,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"closedDate":{"klass":"java.util.Date","propertyType":"DATE","name":"closedDate","fieldName":"closedDate","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"createdBy":{"klass":"org.hisp.dhis.user.User","propertyType":"REFERENCE","name":"createdBy","fieldName":"createdBy","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":true,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":255,"cascade":"none","manyToMany":false,"oneToOne":false,"manyToOne":true,"oneToMany":false,"owningRole":"org.hisp.dhis.organisationunit.OrganisationUnit.createdBy","href":"https://debug.dhis2.org/dev/api/42/schemas/user","relativeApiEndpoint":"/users","apiEndpoint":"https://debug.dhis2.org/dev/api/42/users","translatable":false,"gistPreferences":{"included":"FALSE","transformation":"AUTO"},"propertyTransformer":true},"legendSet":{"klass":"org.hisp.dhis.legend.LegendSet","propertyType":"REFERENCE","name":"legendSet","fieldName":"legendSet","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":false,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"href":"https://debug.dhis2.org/dev/api/42/schemas/legendSet","relativeApiEndpoint":"/legendSets","apiEndpoint":"https://debug.dhis2.org/dev/api/42/legendSets","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"comment":{"klass":"java.lang.String","propertyType":"TEXT","name":"comment","fieldName":"comment","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":true,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":2147483647,"max":2147483647,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":false},"geometry":{"klass":"org.locationtech.jts.geom.Geometry","propertyType":"COMPLEX","name":"geometry","fieldName":"geometry","persisted":true,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":true,"identifiableObject":false,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"length":131072,"max":131072,"min":0,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"translatable":false,"gistPreferences":{"included":"FALSE","transformation":"AUTO"},"propertyTransformer":false},"user":{"klass":"org.hisp.dhis.user.User","propertyType":"REFERENCE","name":"user","fieldName":"user","persisted":false,"namespace":"http://dhis2.org/schema/dxf/2.0","attribute":false,"simple":false,"collection":false,"ordered":false,"owner":false,"identifiableObject":true,"nameableObject":false,"embeddedObject":false,"analyticalObject":false,"readable":true,"writable":true,"unique":false,"required":false,"manyToMany":false,"oneToOne":false,"manyToOne":false,"oneToMany":false,"href":"https://debug.dhis2.org/dev/api/42/schemas/user","relativeApiEndpoint":"/users","apiEndpoint":"https://debug.dhis2.org/dev/api/42/users","translatable":false,"gistPreferences":{"included":"AUTO","transformation":"AUTO"},"propertyTransformer":true}},"translatable":true}'),o=t(16680),d=t(31187),c=t(64125);const f=()=>s.Jb.helpers.fromRegExp(/[a-zA-Z]{1}[a-zA-Z0-9]{10}/),u=function(){let{deleteAccess:e=s.Jb.datatype.boolean(),externalizeAccess:a=s.Jb.datatype.boolean(),manageAccess:t=s.Jb.datatype.boolean(),readAccess:n=s.Jb.datatype.boolean(),updateAccess:l=s.Jb.datatype.boolean(),writeAccess:r=s.Jb.datatype.boolean(),readDataAcess:i=s.Jb.datatype.boolean(),writeDataAccess:o=s.Jb.datatype.boolean()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:{read:i,write:o},delete:e,externalize:a,manage:t,read:n,update:l,write:r}},p=function(){let{id:e=f(),code:a=null,name:t=s.Jb.person.fullName(),username:n=s.Jb.internet.userName()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e,code:a,name:t,displayName:t,username:n}},m=function(){let{id:e=f(),code:a=s.Jb.string.alphanumeric(6),name:t=s.Jb.location.city(),created:n=s.Jb.date.past().toUTCString(),lastUpdated:l=s.Jb.date.past().toUTCString(),createdBy:r=p(),lastUpdatedBy:i=p(),parentId:o=null,ancestors:d=[],level:c=null,childCount:m=0,access:b=u()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{code:a,name:t,created:n,lastUpdated:l,createdBy:r,lastUpdatedBy:i,sharing:{},shortName:t.slice(0,5),parent:o?{id:o}:void 0,path:`/${e}`,displayName:t,href:s.Jb.internet.url(),id:e,level:c||d.length,ancestors:d,childCount:m,access:b}};var b=t(65328),T=t(32289);const y=new n.fk({type:"unknown",message:"404 not found",details:{httpStatusCode:404}}),g=()=>Promise.reject(new n.fk(y)),O=jest.fn(),h=async e=>{let{rootOrgUnits:a=[m()],otherOrgUnits:t=[],userDataStore:n=g}=e;const f={handle:{section:o.In.organisationUnit}},u=[...t,...a];d.YH.getState().setSchemas({organisationUnit:i}),c.$K.getState().setCurrentUser({organisationUnits:a,authorities:new Set,name:s.Jb.person.fullName(),email:s.Jb.internet.email(),settings:{}});const p=(0,l.XX)(r.createElement(b.A,{path:"/organisationUnits",customData:{organisationUnits:(e,a)=>{if("read"===e&&void 0!==a.id){return u.find((e=>e.id===a.id))}if("read"===e){const e=/:(\w+)$/,t=a.params.filter[0].match(e)[1];return{organisationUnits:u.filter((e=>{var a;return e.id===t||(null===(a=e.parent)||void 0===a?void 0:a.id)===t}))}}"delete"===e&&O(a)},userDataStore:n},routeOptions:f},r.createElement(T.Component,null)));return await(0,l.n8)((()=>p.queryByTestId("dhis2-uicore-circularloader"))),p};describe("Organisation unit list",(()=>{const e=console.warn;jest.spyOn(console,"warn").mockImplementation((a=>{a.match(/No server timezone/)||e(a)})),it("should show evey org unit in the right order",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,childCount:1}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:1}),n=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),s=m({level:3,ancestors:[e,t],parentId:t.id,childCount:0}),l=m({level:3,ancestors:[a],parentId:a.id,childCount:0}),r=(await h({rootOrgUnits:[e,a],otherOrgUnits:[t,n,s,l]})).getAllByTestId("dhis2-uicore-datatablerow");expect(r.length).toBe(6),expect(r[0]).toHaveTextContent("Name"),expect(r[0]).toHaveTextContent("Id"),expect(r[0]).toHaveTextContent("Code"),expect(r[0]).toHaveTextContent("Last updated"),expect(r[0]).toHaveTextContent("Actions"),expect(r[1]).toHaveTextContent(e.displayName),expect(r[1]).toHaveTextContent(e.id),expect(r[1]).toHaveTextContent(e.code),expect(r[1]).toHaveTextContent((0,o.gs)(new Date(e.lastUpdated))),expect(r[2]).toHaveTextContent(t.displayName),expect(r[2]).toHaveTextContent(t.id),expect(r[2]).toHaveTextContent(t.code),expect(r[2]).toHaveTextContent((0,o.gs)(new Date(t.lastUpdated))),expect(r[3]).toHaveTextContent(n.displayName),expect(r[3]).toHaveTextContent(n.id),expect(r[3]).toHaveTextContent(n.code),expect(r[3]).toHaveTextContent((0,o.gs)(new Date(n.lastUpdated))),expect(r[4]).toHaveTextContent(a.displayName),expect(r[4]).toHaveTextContent(a.id),expect(r[4]).toHaveTextContent(a.code),expect(r[4]).toHaveTextContent((0,o.gs)(new Date(a.lastUpdated))),expect(r[5]).toHaveTextContent(l.displayName),expect(r[5]).toHaveTextContent(l.id),expect(r[5]).toHaveTextContent(l.code),expect(r[5]).toHaveTextContent((0,o.gs)(new Date(l.lastUpdated)))})),it("should collapse visible tree nodes",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,childCount:1}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:1}),n=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),s=m({level:3,ancestors:[e,t],parentId:t.id,childCount:0}),r=m({level:3,ancestors:[a],parentId:a.id,childCount:0}),i=await h({rootOrgUnits:[e,a],otherOrgUnits:[t,n,s,r]}),o=i.getAllByTestId("dhis2-uicore-datatablerow");expect(o.length).toBe(6);const d=o[4],c=(0,l.ux)(d).getByTestId("row-expand-icon");l.rC.click(c);const f=await i.findAllByTestId("dhis2-uicore-datatablerow");expect(f.length).toBe(5),expect(o[1]).toHaveTextContent(e.displayName),expect(o[2]).toHaveTextContent(t.displayName),expect(o[3]).toHaveTextContent(n.displayName),expect(o[4]).toHaveTextContent(a.displayName)})),it("should expand a node tree",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,childCount:1}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:1}),n=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),s=m({level:3,ancestors:[e,t],parentId:t.id,childCount:0}),r=m({level:3,ancestors:[a],parentId:a.id,childCount:0}),i=await h({rootOrgUnits:[e,a],otherOrgUnits:[t,n,s,r]}),o=i.getAllByTestId("dhis2-uicore-datatablerow");expect(o.length).toBe(6);const d=o[2],c=(0,l.ux)(d).getByTestId("row-expand-icon");l.rC.click(c);let f=[];await(0,l.fm)((()=>{f=i.getAllByTestId("dhis2-uicore-datatablerow"),expect(f.length).toBe(7)})),expect(f[1]).toHaveTextContent(e.displayName),expect(f[2]).toHaveTextContent(t.displayName),expect(f[3]).toHaveTextContent(s.displayName),expect(f[4]).toHaveTextContent(n.displayName),expect(f[5]).toHaveTextContent(a.displayName),expect(f[6]).toHaveTextContent(r.displayName)})),it("should show a clickable delete action when org unit can be deleted",(async()=>{const e=m({level:1,childCount:0,access:u({deleteAccess:!0})}),a=await h({rootOrgUnits:[e]}),t=a.getAllByTestId("dhis2-uicore-datatablerow");expect(t.length).toBe(2),expect(t[1]).toHaveTextContent(e.displayName);const n=(0,l.ux)(t[1]).getByTestId("row-actions-menu-button");l.rC.click(n);const s=a.getByTestId("row-actions-menu");expect(s).toBeVisible(),expect((0,l.ux)(s).getByText("Delete").closest("li")).not.toHaveClass("disabled")})),it("should show a disabled delete action when org unit can not be deleted",(async()=>{const e=m({level:1,childCount:0,access:u({deleteAccess:!1})}),a=await h({rootOrgUnits:[e]}),t=a.getAllByTestId("dhis2-uicore-datatablerow");expect(t.length).toBe(2),expect(t[1]).toHaveTextContent(e.displayName);const n=(0,l.ux)(t[1]).getByTestId("row-actions-menu-button");l.rC.click(n);const s=a.getByTestId("row-actions-menu");expect(s).toBeVisible(),expect((0,l.ux)(s).getByText("Delete").closest("li")).toHaveClass("disabled")})),it("deletes an org unit when possible",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]}),s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4),expect(s[2]).toHaveTextContent(a.displayName);const r=(0,l.ux)(s[2]).getByTestId("row-actions-menu-button");l.rC.click(r);const i=n.getByTestId("row-actions-menu");expect(i).toBeVisible(),l.rC.click((0,l.ux)(i).getByText("Delete"));const o=await n.findByTestId("delete-confirmation-modal");expect(o).toBeVisible(),l.rC.click((0,l.ux)(o).getByRole("button",{name:"Confirm deletion"})),await(0,l.fm)((()=>{expect(O).toHaveBeenCalledWith(expect.objectContaining({id:a.id}))}))})),it("has a link to an org unit edit page in the row actions menu",(async()=>{const e=m({level:1,childCount:2,access:u({deleteAccess:!0})}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]});expect(n.queryByText("Organisation unit management")).toBeVisible();const s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4),expect(s[2]).toHaveTextContent(a.displayName);const r=(0,l.ux)(s[2]).getByTestId("row-actions-menu-button");l.rC.click(r);const i=n.getByTestId("row-actions-menu");expect(i).toBeVisible(),expect((0,l.ux)(i).getByText("Edit").closest("a")).toHaveAttribute("href",`/organisationUnits/${a.id}`)})),it("has a link to an org unit edit page outside the action menu",(async()=>{const e=m({level:1,childCount:2,access:u({deleteAccess:!0})}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]});expect(n.queryByText("Organisation unit management")).toBeVisible();const s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4),expect(s[2]).toHaveTextContent(a.displayName);const r=(0,l.ux)(s[2]).getByTestId("row-actions"),i=(0,l.ux)(r).getAllByRole("link");expect(i[0]).toHaveAttribute("href",`/organisationUnits/${a.id}`)})),it("has show a detail panel",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]}),s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4),expect(s[2]).toHaveTextContent(a.displayName);const r=(0,l.ux)(s[2]).getByTestId("row-actions-menu-button");l.rC.click(r);const i=n.getByTestId("row-actions-menu");expect(i).toBeVisible(),l.rC.click((0,l.ux)(i).getByText("Show details"));const o=await n.findByTestId("details-panel");expect(o).toBeVisible(),expect(o).toHaveTextContent(a.displayName),expect(o).toHaveTextContent(a.code),expect(o).toHaveTextContent(a.id),expect(o).toHaveTextContent(a.createdBy.displayName),expect(o).toHaveTextContent(a.lastUpdatedBy.displayName),expect((0,l.ux)(o).getByText("API URL link").closest("a")).toHaveAttribute("href",a.href)})),it("should open and close the multi select toolbar",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]}),s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4);const r=(0,l.ux)(s[3]).getByRole("checkbox");l.rC.click(r);const i=n.getByTestId("dhis2-uicore-tabletoolbar");expect(i).toBeVisible(),expect(r).toBeChecked(),l.rC.click((0,l.ux)(i).getByText("Deselect all")),expect(r).not.toBeChecked(),expect(i).not.toBeVisible()})),it("should download all selected rows",(async()=>{const e=m({level:1,childCount:2}),a=m({level:2,ancestors:[e],parentId:e.id,childCount:0,access:u({deleteAccess:!0})}),t=m({level:2,ancestors:[e],parentId:e.id,childCount:0}),n=await h({rootOrgUnits:[e],otherOrgUnits:[a,t]}),s=n.getAllByTestId("dhis2-uicore-datatablerow");expect(s.length).toBe(4);const r=s[1],i=s[3];l.rC.click((0,l.ux)(r).getByRole("checkbox")),l.rC.click((0,l.ux)(i).getByRole("checkbox"));const o=n.getByTestId("dhis2-uicore-tabletoolbar");l.rC.click((0,l.ux)(o).getByText("Download"));const d=await n.findByTestId("download-modal");expect(d).toBeVisible();const c=(0,l.ux)(d).getByTestId("download-models-to-include"),f=(0,l.ux)(c).getAllByRole("radio").find((e=>e.checked));expect(f).not.toBeNull(),expect(f.closest("label")).toHaveTextContent("Only selected (2)")}))}))},71336:function(e,a,t){"use strict";t.r(a),t.d(a,{OrganisationUnitList:function(){return O}});var n=t(9730),s=t(51112),l=t(72176),r=t(87899),i=t(68515),o=t(16231),d=t(7716),c=t(48138),f=t(41897),u=t(16680),p=t(30656),m=t(64125),b=t(77091),T=t(98677),y=t(27013),g=t(60492);const O=()=>{const e=(()=>{const{columns:e}=(0,o.kX)(),a=(0,u.pD)(u.fh.organisationUnit);return(0,l.useMemo)((()=>e.map((e=>({accessorKey:e.path,header:e.label,cell:t=>{let{row:n}=t;return l.createElement(d.J,{path:"name"===e.path?"displayName":e.path,schema:a,sectionModel:n.original})},meta:{fieldFilter:(0,p.Xq)(a,e.path)}})))),[e,a])})(),[a]=(0,u.dc)("identifiable"),t=(0,m.f)(),O=(0,l.useMemo)((()=>Object.fromEntries(t.map((e=>[e.id,!0])))),[t]),[h,x]=(0,l.useState)((()=>O)),[E,j]=(0,l.useState)((()=>O)),[A,U]=(0,l.useState)(),v=(0,l.useCallback)((e=>{let{id:a}=e;U((e=>e===a?void 0:a))}),[U]),w=e.map((e=>e.meta.fieldFilter)),{queries:N,fetchNextPage:C}=(0,g.usePaginatedChildrenOrgUnitsController)({parentIds:h,fieldFilters:w}),I=!!a,M=N.some((e=>e.isError)),S=(0,g.useFilteredOrgUnits)({searchQuery:a,fieldFilters:w,enabled:I});(0,l.useEffect)((()=>{if(!I)return j(O),void x(O);j(!0),x({})}),[I,O]);const{rootOrgUnits:R,flatOrgUnits:q}=(0,l.useMemo)((()=>{const e=new Map,a=N.concat(S).flatMap((e=>{var a;if(!e.data)return[];const t=null!==(a=e.data.organisationUnits)&&void 0!==a?a:[],n=t.flatMap((e=>e.ancestors));return[...t,...n]})).reduce(((a,t)=>(O[t.id]&&e.set(t.id,t),a[t.id]=t,a)),{});return{rootOrgUnits:Array.from(e.values()),flatOrgUnits:Object.values(a)}}),[N,S,O]),k=(0,l.useCallback)((e=>{const a=()=>Object.fromEntries(q.map((e=>[e.id,!0]))),t=e=>({...O,...e});"function"===typeof e?j((n=>{const s=e(n);return I||x(!0===s?a():t(s)),s})):(j(e),I||x(!0===e?a():t(e)))}),[I,j,q,O]),P=(0,n.N4)({columns:e,data:R,getRowId:e=>e.id,getCoreRowModel:(0,s.HT)(),getRowCanExpand:e=>e.original.childCount>0,getSubRows:e=>q.filter((a=>{var t;return(null===(t=a.parent)||void 0===t?void 0:t.id)===e.id})),getExpandedRowModel:(0,s.D0)(),onExpandedChange:k,state:{expanded:E},enableSubRowSelection:!1});return l.createElement("div",null,l.createElement(c.M,null),l.createElement(r.z2,null),l.createElement("div",{className:b.default.listDetailsWrapper},l.createElement(f.M,{selectedModels:new Set(P.getSelectedRowModel().flatRows.map((e=>e.id))),onDeselectAll:()=>{P.resetRowSelection(!0)}}),l.createElement(r._K,{headerColumns:P.getHeaderGroups()[0].headers.map((e=>({label:e.column.columnDef.header,path:e.column.id})))},l.createElement(T.OrganisationUnitListMessage,{isFiltering:I,queries:N.concat(S),orgUnitCount:P.getRowCount()}),P.getRowModel().rows.map((e=>l.createElement(y.OrganisationUnitRow,{key:e.id,row:e,toggleShowAll:e=>x((a=>{const{[e]:t,...n}=a;return t?n:{...a,[e]:!0}})),showAllActive:!0===h[e.original.id],onShowDetailsClick:v,isFiltering:I,hasErrored:M,fetchNextPage:C})))),A&&l.createElement(i.rn,{onClose:()=>U(void 0),key:A},l.createElement(i.VR,{modelId:A}))))}},99761:function(e,a,t){"use strict";t.r(a),t.d(a,{OrganisationUnitListActions:function(){return h}});var n=t(28014),s=t(21039),l=t(95184),r=t(17982),i=t(85713),o=t(49266),d=t(15361),c=t(86284),f=t(72176),u=t(84586),p=t(14571),m=t(75204),b=t(50761),T=t(76680),y=t(41541),g=t(16680),O=t(99217);const h=e=>{let{model:a,onShowDetailsClick:t}=e;const n=(0,O.hv)(a),s=(0,u.useQueryClient)();return f.createElement(T.im,null,f.createElement(T.ZP,{modelId:a.id}),f.createElement(x,{deletable:n,model:a,onDeleteSuccess:()=>{s.invalidateQueries({queryKey:[{resource:"organisationUnits"}]})},onShowDetailsClick:t}))},x=e=>{let{deletable:a,model:t,onDeleteSuccess:u,onShowDetailsClick:T}=e;const[O,h]=(0,f.useState)(!1),x=(0,f.useRef)(null),E=(0,p.$P)(t.id,{relative:"path"}),j=(0,m.Gy)(t.id);return f.createElement("div",{ref:x},f.createElement(s.$,{small:!0,secondary:!0,onClick:()=>h(!O),dataTest:"row-actions-menu-button",icon:f.createElement(l.A,null)}),O&&f.createElement(r.A,{arrow:!1,placement:"bottom-end",reference:x,onClickOutside:()=>h(!1),dataTest:"row-actions-menu"},f.createElement(i.n,null,f.createElement(o.D,{dense:!0,label:n.A.t("Show details"),icon:f.createElement(d.A,null),onClick:()=>{T(t),h(!1)}}),f.createElement(o.D,{dense:!0,label:n.A.t("Edit"),icon:f.createElement(c.A,null),onClick:(e,a)=>{j(a),h(!1)},target:"_blank",href:E}),f.createElement(y.T,{condition:!a,content:g.H$.noDeleteAccess},f.createElement(b.S,{model:t,disabled:!a,onDeleteSuccess:()=>{u(),h(!1)},onCancel:()=>h(!1)})))))}},98677:function(e,a,t){"use strict";t.r(a),t.d(a,{OrganisationUnitListMessage:function(){return o}});var n=t(28014),s=t(33587),l=t(72176),r=t(35573),i=t(66150);const o=e=>{let{orgUnitCount:a,isFiltering:t,queries:o}=e;const d=o.find((e=>e.error));if(d)return console.error(d.error),l.createElement(i.ut,null);return a<1&&o.some((e=>e.isLoading))?l.createElement(r.Z,null):t&&a<1?l.createElement(i.XL,null):a<1?l.createElement(i.Z5,null,l.createElement(s.o,null,n.A.t("No organisation units available"))):null}},27013:function(e,a,t){"use strict";t.r(a),t.d(a,{OrganisationUnitRow:function(){return T}});var n=t(28014),s=t(12537),l=t(62251),r=t(21039),i=t(75012),o=t(31353),d=t(43399),c=t(81807),f=t(79432),u=t(9730),p=t(72176),m=t(77091),b=t(99761);const T=e=>{let{row:a,toggleShowAll:t,showAllActive:T,isFiltering:y,fetchNextPage:g,onShowDetailsClick:O,hasErrored:h}=e;const x=a.getParentRow();return p.createElement(p.Fragment,null,p.createElement(s.J,{key:a.id},p.createElement(l.B,null,p.createElement("span",{style:{paddingLeft:2*a.depth+"rem",display:"flex"}},a.getCanExpand()?p.createElement(p.Fragment,null,y&&(T||a.original.childCount!==a.subRows.length)&&p.createElement(r.$,{secondary:!0,onClick:()=>{t(a.original.id)},icon:T?p.createElement(i.A,null):p.createElement(o.A,null)},"Show all"),p.createElement(r.$,{className:m.default.expandButton,secondary:!0,type:"button",dataTest:"row-expand-icon",loading:a.getIsExpanded()&&a.subRows.length<1&&!h,icon:a.getIsExpanded()?p.createElement(d.A,null):p.createElement(c.A,null),onClick:a.getToggleExpandedHandler()})):null,p.createElement(f.S,{checked:a.getIsSelected(),onChange:e=>{let{checked:t}=e;return a.toggleSelected(t)}}))),a.getVisibleCells().map((e=>p.createElement(l.B,{key:e.id},(0,u.Kv)(e.column.columnDef.cell,e.getContext())))),p.createElement(l.B,null,p.createElement(b.OrganisationUnitListActions,{model:a.original,onShowDetailsClick:O}))),!y&&x&&x.getIsExpanded()&&x.subRows.length<(null===x||void 0===x?void 0:x.original.childCount)&&a===x.subRows[x.subRows.length-1]&&p.createElement(s.J,null,p.createElement(l.B,{colSpan:"100",style:{textAlign:"center"},onClick:()=>g(x.original.id)},n.A.t("Load more for {{orgUnitName}}",{orgUnitName:x.original.displayName}))))}},23994:function(e,a,t){"use strict";t.r(a),t.d(a,{OrganisationUnitList:function(){return n.OrganisationUnitList}});var n=t(71336)},60492:function(e,a,t){"use strict";t.r(a),t.d(a,{useFilteredOrgUnits:function(){return o},usePaginatedChildrenOrgUnitsController:function(){return d}});var n=t(72176),s=t(84586),l=t(27648);const r=["id","access","displayName","level","path","parent","children~size~rename(childCount)"],i=e=>{const a=r.concat(e),t=`ancestors[${a.join()},href]`;return a.concat(t)},o=e=>{let{fieldFilters:a,searchQuery:t,enabled:n}=e;const r=(0,l.sf)(),o={resource:"organisationUnits",params:{fields:i(a),query:t,withinUserHierarchy:!0}};return(0,s.useQuery)({enabled:n,queryKey:[o],queryFn:r,staleTime:6e4,cacheTime:6e4,keepPreviousData:!0})},d=e=>{const a=(0,l.sf)(),t=e.parentIds,[r,o]=(0,n.useState)(Object.fromEntries(Object.keys(t).map((e=>[e,[1]])))),d=(0,n.useMemo)((()=>Object.keys(t).flatMap((e=>(r[e]||[1]).map((a=>[e,a]))))),[t,r]),c=(0,n.useCallback)((e=>{o((a=>{const t=a[e]||[1];return{...a,[e]:[...t,t[t.length-1]+1]}}))}),[o]),f=d.map((t=>{let[n,s]=t;const l={resource:"organisationUnits",params:{fields:i(e.fieldFilters),filter:[`parent.id:eq:${n}`,`id:eq:${n}`],rootJunction:"OR",order:"displayName:asc",page:s}};return{enabled:e.enabled,queryKey:[l],queryFn:a,staleTime:6e4,cacheTime:6e4,meta:{parent:n}}}));return{queries:(0,s.useQueries)(f),fetchNextPage:c}}},65328:function(e,a,t){"use strict";t.d(a,{p:function(){return d}});var n=t(5292),s=t(72176),l=t(14571),r=t(75204),i=t(34689),o=t(9476);const d=e=>{let{dataForCustomProvider:a,children:t}=e;return s.createElement(n.Kq,{config:{baseUrl:"http://dhis2-imaginary-test-server",apiVersion:41},plugin:!1,parentAlertsAdd:()=>{},showAlertsInPlugin:!0},s.createElement(n.Nh,{data:a,options:{failOnMiss:!0}},t))};a.A=e=>{let{path:a,customData:t,routeOptions:n,children:c}=e;const f=[{path:a,element:s.createElement(d,{dataForCustomProvider:t},s.createElement(i.QueryParamProvider,{adapter:o.S},c)),...n}],u=(0,l.bg)(f,{initialEntries:[a],initialIndex:0});return s.createElement(r.pg,{router:u})}},77091:function(e,a,t){"use strict";t.r(a),a.default={expandButton:"OrganisationUnitList_expandButton__AjbgN",listDetailsWrapper:"OrganisationUnitList_listDetailsWrapper__eX9Q3"}},86973:function(){}}]);
//# sourceMappingURL=8626.cafefcf4.chunk.js.map