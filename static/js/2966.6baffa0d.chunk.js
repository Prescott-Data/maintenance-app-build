"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[2966,9416,6247,4454,8855,9435,4303],{22966:function(e,t,a){a.r(t),a.d(t,{Component:function(){return F}});var n=a(5292),r=a(28014),l=a(72176),i=a(50445),o=a(14571),m=a(87899),u=a(49394),s=a(16680),d=a(16757),c=a(39614),E=a(98855);const{Form:p}=(0,i.mz)(),f=s.Vr.dataElementGroup,h={dataElementGroup:{resource:"dataElementGroups",id:e=>{let{id:t}=e;return t},params:{fields:["*","attributeValues[*]"]}}};function v(e){let{dataElementGroup:t,customAttributes:a}=e;if(!t)return{};const n=(0,c.W)(t.attributeValues,a);return{id:t.id,name:t.name,shortName:t.shortName,code:t.code,dataElements:t.dataElements,attributeValues:n}}const F=()=>{var e;const t=(0,o.g)().id,a=(i=t,(0,n.iO)(h,{variables:{id:i}}));var i;const s=(0,u.yZ)(),d=null===(e=a.data)||void 0===e?void 0:e.dataElementGroup;return l.createElement(m.aH,{queryResponse:a,label:r.A.t("Data element group")},l.createElement(m.aH,{queryResponse:s,label:r.A.t("Attributes")},l.createElement(b,{dataElementGroup:d,attributes:s.data})))};function b(e){let{dataElementGroup:t,attributes:a}=e;const n=(0,o.Zp)(),r=(0,s.N5)(t.id,f.namePlural);return l.createElement(p,{validateOnBlur:!0,onSubmit:async function(e,a){const l=(0,d.P)({values:e,dirtyFields:a.getState().dirtyFields,originalValue:t}),i=await r(l);if(i)return i;n((0,s.HR)(f))},validate:e=>(0,s.tf)(E.dataElementGroupSchema,e),initialValues:v({dataElementGroup:t,customAttributes:a})},(e=>{let{handleSubmit:t}=e;return l.createElement("form",{onSubmit:t},l.createElement(u.Q8,{section:f},l.createElement(E.DataElementGroupFormFields,null)))}))}},26247:function(e,t,a){a.r(t),a.d(t,{DataElementsField:function(){return c}});var n=a(28014),r=a(73968),l=a(21039),i=a(24394),o=a(72176),m=a(50445),u=a(14571),s=a(87899),d=a(74454);function c(){var e;const t="dataElements",{input:a,meta:c}=(0,m.Mt)(t,{multiple:!0,format:e=>null===e||void 0===e?void 0:e.map((e=>e.id)),parse:e=>e.map((e=>({id:e}))),validateFields:[]}),E=(0,u.$P)("/dataElements/new"),p=(0,o.useRef)({refetch:()=>console.error("Not initialized")}),f=o.createElement("p",{className:d.default.dataElementsPickedHeader},n.A.t("Selected data elements")),h=o.createElement("div",{className:d.default.dataElementsOptionsFooter},o.createElement(r.v,null,o.createElement(l.$,{small:!0,onClick:p.current.refetch},n.A.t("Refresh list")),o.createElement(l.$,{small:!0,onClick:()=>window.open(E,"_blank")},n.A.t("Add new"))));return o.createElement(i.D,{dataTest:"formfields-dataElementsets",error:!!c.error,validationText:null===(e=c.error)||void 0===e?void 0:e.toString(),name:t},o.createElement(s.tx,{ref:p,selected:a.value,onChange:e=>{let{selected:t}=e;return a.onChange(t)},rightHeader:f,leftFooter:h}))}},29416:function(e,t,a){a.r(t),a.d(t,{DataElementsField:function(){return n.DataElementsField}});var n=a(26247)},29435:function(e,t,a){a.r(t),a.d(t,{DataElementGroupFormFields:function(){return s}});var n=a(28014),r=a(72176),l=a(87899),i=a(49394),o=a(16680),m=a(29416);const u=o.Vr.dataElementGroup;function s(){return r.createElement(r.Fragment,null,r.createElement(l.Hl,null,r.createElement(l.L7,null,n.A.t("Basic information")),r.createElement(l.hK,null,n.A.t("Set up the information for this data element group")),r.createElement(i.Vd,null),r.createElement(l.Ys,null,r.createElement(i.zO,{schemaSection:u,helpText:n.A.t("Explain the purpose of this data element group.")}))),r.createElement(l.Hl,null,r.createElement(l.L7,null,n.A.t("Data elements")),r.createElement(l.hK,null,""),r.createElement(l.Ys,null,r.createElement(m.DataElementsField,null))),r.createElement(l.Ot,{schemaSection:u}))}},44303:function(e,t,a){a.r(t),a.d(t,{dataElementGroupSchema:function(){return r}});var n=a(73044);const r=n.z.object({name:n.z.string().trim(),shortName:n.z.string().trim(),code:n.z.string().trim(),description:n.z.string().trim(),dataElements:n.z.array(n.z.object({id:n.z.string()}))}).partial()},98855:function(e,t,a){a.r(t),a.d(t,{DataElementGroupFormFields:function(){return n.DataElementGroupFormFields},dataElementGroupSchema:function(){return r.dataElementGroupSchema}});var n=a(29435),r=a(44303)},74454:function(e,t,a){a.r(t),t.default={dataElementsOptionsFooter:"DataElementsField_dataElementsOptionsFooter__Fn5g8",dataElementsPickedHeader:"DataElementsField_dataElementsPickedHeader__bqjmJ"}}}]);
//# sourceMappingURL=2966.6baffa0d.chunk.js.map