"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[9864,1410,3981,3756,7572,7921,6229,3827,1111],{49864:function(e,t,n){n.r(t),n.d(t,{Component:function(){return G}});var a=n(5292),r=n(28014),l=n(72176),o=n(50445),i=n(14571),u=n(87899),m=n(49394),s=n(16680),d=n(16757),c=n(39614),p=n(36229);const{Form:E}=(0,o.mz)(),f=s.Vr.dataElementGroupSet,h={dataElementGroupSet:{resource:"dataElementGroupSets",id:e=>{let{id:t}=e;return t},params:{fields:["*","attributeValues[*]"]}}};function F(e){let{dataElementGroupSet:t,customAttributes:n}=e;if(!t)return{};const a=(0,c.W)(t.attributeValues,n);return{id:t.id,name:t.name,shortName:t.shortName,code:t.code,description:t.description,compulsory:t.compulsory,dataDimension:t.dataDimension,dataElementGroups:t.dataElementGroups||[],attributeValues:a}}const G=()=>{var e;const t=(0,i.g)().id,n=(o=t,(0,a.iO)(h,{variables:{id:o}}));var o;const s=(0,m.yZ)(),d=null===(e=n.data)||void 0===e?void 0:e.dataElementGroupSet;return l.createElement(u.aH,{queryResponse:n,label:r.A.t("Data element group set")},l.createElement(u.aH,{queryResponse:s,label:r.A.t("Attributes")},l.createElement(S,{dataElementGroupSet:d,attributes:s.data})))};function S(e){let{dataElementGroupSet:t,attributes:n}=e;const a=(0,i.Zp)(),r=(0,s.N5)(t.id,f.namePlural);return l.createElement(E,{validateOnBlur:!0,onSubmit:async function(e,n){const l=(0,d.P)({values:e,dirtyFields:n.getState().dirtyFields,originalValue:t}),o=await r(l);if(o)return o;a((0,s.HR)(f))},validate:e=>(0,s.tf)(p.dataElementGroupSetSchema,e),initialValues:F({dataElementGroupSet:t,customAttributes:n})},(e=>{let{handleSubmit:t}=e;return l.createElement("form",{onSubmit:t},l.createElement(m.Q8,{section:f},l.createElement(p.DataElementGroupSetFormFields,null)))}))}},23981:function(e,t,n){n.r(t),n.d(t,{CompulsoryField:function(){return i}});var a=n(28014),r=n(52791),l=n(72176),o=n(50445);function i(){return l.createElement(o.D0,{component:r.o,dataTest:"dataelementsformfields-compulsory",name:"compulsory",label:a.A.t("Compulsory"),type:"checkbox",validateFields:[]})}},33756:function(e,t,n){n.r(t),n.d(t,{DataDimensionField:function(){return i}});var a=n(28014),r=n(52791),l=n(72176),o=n(50445);function i(){return l.createElement(o.D0,{component:r.o,dataTest:"dataelementsformfields-datadimension",name:"dataDimension",label:a.A.t("Data dimension"),type:"checkbox",validateFields:[]})}},97572:function(e,t,n){n.r(t),n.d(t,{DataElementGroupsField:function(){return c}});var a=n(28014),r=n(73968),l=n(21039),o=n(24394),i=n(72176),u=n(50445),m=n(14571),s=n(87899),d=n(57921);function c(){var e;const t="dataElementGroups",{input:n,meta:c}=(0,u.Mt)(t,{multiple:!0,format:e=>null===e||void 0===e?void 0:e.map((e=>e.id)),parse:e=>e.map((e=>({id:e}))),validateFields:[]}),p=(0,m.$P)("/dataElementGroups/new"),E=(0,i.useRef)({refetch:()=>{throw new Error("Not initialized")}}),f=i.createElement("p",{className:d.default.dataElementGroupsPickedHeader},a.A.t("Selected data element groups")),h=i.createElement("div",{className:d.default.dataElementGroupsOptionsFooter},i.createElement(r.v,null,i.createElement(l.$,{small:!0,onClick:E.current.refetch},a.A.t("Refresh list")),i.createElement(l.$,{small:!0,onClick:()=>window.open(p,"_blank")},a.A.t("Add new"))));return i.createElement(o.D,{dataTest:"dataelementsformfields-dataElementGroupsets",error:!!c.error,validationText:null===(e=c.error)||void 0===e?void 0:e.toString(),name:t},i.createElement(s.wn,{ref:E,selected:n.value,onChange:e=>{let{selected:t}=e;return n.onChange(t)},rightHeader:f,leftFooter:h}))}},11410:function(e,t,n){n.r(t),n.d(t,{CompulsoryField:function(){return a.CompulsoryField},DataDimensionField:function(){return r.DataDimensionField},DataElementGroupsField:function(){return l.DataElementGroupsField}});var a=n(23981),r=n(33756),l=n(97572)},33827:function(e,t,n){n.r(t),n.d(t,{DataElementGroupSetFormFields:function(){return s}});var a=n(28014),r=n(72176),l=n(87899),o=n(49394),i=n(16680),u=n(11410);const m=i.Vr.dataElementGroupSet;function s(){return r.createElement(r.Fragment,null,r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Basic information")),r.createElement(l.hK,null,a.A.t("Set up the information for this data element group")),r.createElement(o.Vd,null),r.createElement(l.Ys,null,r.createElement(o.zO,{schemaSection:m,helpText:a.A.t("Explain the purpose of this data element group.")})),r.createElement(l.Ys,null,r.createElement(u.CompulsoryField,null)),r.createElement(l.Ys,null,r.createElement(u.DataDimensionField,null))),r.createElement(l.Hl,null,r.createElement(l.L7,null,a.A.t("Data element groups")),r.createElement(l.hK,null,""),r.createElement(l.Ys,null,r.createElement(u.DataElementGroupsField,null))),r.createElement(l.Ot,{schemaSection:m}))}},61111:function(e,t,n){n.r(t),n.d(t,{dataElementGroupSetSchema:function(){return r}});var a=n(73044);const r=a.z.object({name:a.z.string().trim(),shortName:a.z.string().trim(),code:a.z.string().trim(),description:a.z.string().trim(),dataElements:a.z.array(a.z.object({id:a.z.string()}))}).partial()},36229:function(e,t,n){n.r(t),n.d(t,{DataElementGroupSetFormFields:function(){return a.DataElementGroupSetFormFields},dataElementGroupSetSchema:function(){return r.dataElementGroupSetSchema}});var a=n(33827),r=n(61111)},57921:function(e,t,n){n.r(t),t.default={dataElementsOptionsFooter:"DataElementGroupsField_dataElementsOptionsFooter__l9fmA",dataElementsPickedHeader:"DataElementGroupsField_dataElementsPickedHeader__uWdRL"}}}]);
//# sourceMappingURL=9864.f2720f88.chunk.js.map